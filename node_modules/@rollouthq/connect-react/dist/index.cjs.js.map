{"version":3,"sources":["../src/index.ts","../src/components/index.ts","../src/components/automation-creator/automation-creator.tsx","../src/components/automation-form/automation-form.tsx","../src/components/automation-form/get-trigger-renderer-data.ts","../src/components/action-inputs/index.tsx","../src/components/action-inputs/dropdown-input.tsx","../src/components/action-inputs/helpers/action-input-form-control.tsx","../src/components/app-component-renderer/app-component-renderer-context.ts","../src/components/app-component-renderer/use-automation-input-param.ts","../src/components/app-component-renderer/use-automation-input-param-schema.ts","../src/components/styled-input-form-control.tsx","../src/components/automation-form/helpers/render-field.tsx","../src/components/card.tsx","../src/utils/form.tsx","../src/components/action-inputs/find-by.tsx","../src/components/action-inputs/rich-text-input.tsx","../src/components/action-inputs/multiselect-input.tsx","../src/components/action-inputs/boolean-input.tsx","../src/components/action-inputs/no-inputs.tsx","../src/contexts/api-base-url-context.tsx","../src/contexts/allowed-apps-context.tsx","../src/hooks/use-actions-query.ts","../src/hooks/use-apps-query.ts","../src/hooks/use-credential-handler.ts","../src/components/automation-form/use-oauth.tsx","../src/components/automation-form/action-app-key-input.tsx","../src/components/app-icon.tsx","../src/contexts/end-user-context.tsx","../src/utils/find-zod-issue.ts","../src/components/automation-form/context.tsx","../src/components/automation-form/action-credential-id-input.tsx","../src/components/credential-input.tsx","../src/components/automation-form/helpers/credential-details.tsx","../src/components/automation-form/helpers/token-input.tsx","../src/components/automation-form/action-key-select-input.tsx","../src/components/automation-form/automation-form-action.tsx","../src/components/automation-form/automation-form-action-inputs.tsx","../src/components/app-component-renderer/app-component-renderer.tsx","../src/components/app-component-renderer/input-def-renderer.tsx","../src/components/app-component-renderer/plain-text-input-def-renderer.tsx","../src/components/app-component-renderer/rich-text-input-def-renderer.tsx","../src/components/app-component-renderer/dropdown-input-def-renderer.tsx","../src/components/automation-form/get-action-renderer-data.ts","../src/components/automation-form/automation-form-trigger.tsx","../src/components/automation-form/helpers/trigger-app-key-input.tsx","../src/components/automation-form/helpers/trigger-key-input.tsx","../src/components/automation-form/trigger-credential-id-input.tsx","../src/components/automation-form/name-input.tsx","../src/components/automation-form/types.ts","../src/components/automation-editor/automation-editor.tsx","../src/components/automations-manager/automations-manager.tsx","../src/components/my-automations/my-automations.tsx","../src/components/automations-list/automations-list.tsx","../src/components/blueprint-activator/blueprint-activator.tsx","../src/components/blueprint-activator/types.ts","../src/components/blueprints-list/blueprints-list.tsx","../src/components/blueprints-manager/blueprints-manager.tsx","../src/components/my-blueprints/my-blueprints.tsx","../src/components/powered-by-rollout/powered-by-rollout.tsx","../../../node_modules/@react-aria/ssr/dist/packages/@react-aria/ssr/src/index.ts","../../../node_modules/@react-aria/ssr/dist/packages/@react-aria/ssr/src/SSRProvider.tsx","../src/components/rollout-connect-provider/rollout-connect-provider.tsx","../src/components/error-fallback.tsx","../src/themes/default/index.ts"],"sourcesContent":["import * as components from \"./components\";\n\nexport { curlyTemplate } from \"@rollouthq/common\";\nexport { components };\nexport * from \"./components\";\nexport * from \"./themes/default\";\n","// Export components that should be part of the public API here:\nexport * from \"./automation-creator\";\nexport * from \"./automation-editor\";\nexport * from \"./automations-manager\";\nexport * from \"./blueprint-activator\";\nexport * from \"./blueprints-list\";\nexport * from \"./blueprints-manager\";\nexport * from \"./my-automations\";\nexport * from \"./my-blueprints\";\nexport * from \"./powered-by-rollout\";\nexport * from \"./rollout-connect-provider\";\n","import React, { useState } from \"react\";\n\nimport { InferMutationOutput, useMutation } from \"@rollouthq/api-client-react\";\nimport { AutomationCustomData } from \"@rollouthq/api/engine/automations/custom-data\";\nimport {\n  AutomationForm,\n  AutomationFormData,\n  AutomationFormProps,\n  PartialAutomationFormData,\n} from \"@rollouthq/connect-react/components/automation-form\";\n\ntype Automation = InferMutationOutput<\"automations.create\">;\n\ntype OnBeforeAutomationCreatedReturnSync =\n  | boolean\n  | {\n      automationData: AutomationFormData & {\n        customData?: AutomationCustomData;\n      };\n    };\n\nexport type PrefilledData = {\n  name?: string;\n  trigger?: {\n    appKey?: string;\n    triggerKey?: string;\n    inputParams?: Record<string, any>;\n    credentialId?: string;\n  };\n  action?: {\n    appKey?: string;\n    actionKey?: string;\n    inputParams?: Record<string, any>;\n    credentialId?: string;\n  };\n};\n\nexport type AutomationCreatorProps = {\n  onAutomationCreated: (props: { automation: Automation }) => void;\n  onBeforeAutomationCreate?: (props: {\n    automationData: AutomationFormData;\n  }) =>\n    | OnBeforeAutomationCreatedReturnSync\n    | Promise<OnBeforeAutomationCreatedReturnSync>;\n  onCancel?: () => void;\n  prefilled?: PrefilledData;\n  renderFields?: AutomationFormProps[\"renderFields\"];\n};\n\nexport function AutomationCreator(props: AutomationCreatorProps) {\n  const {\n    onAutomationCreated,\n    onBeforeAutomationCreate,\n    onCancel,\n    prefilled,\n    renderFields,\n  } = props;\n\n  const createAutomationMutation = useMutation(\"automations.create\");\n\n  const [automationFormData, setAutomationFormData] =\n    useState<PartialAutomationFormData>(() => {\n      const defaultData: PartialAutomationFormData = {};\n\n      if (prefilled == null) {\n        return defaultData;\n      }\n\n      if (prefilled.name) {\n        defaultData.name = prefilled.name;\n      }\n\n      if (prefilled.trigger?.appKey != null) {\n        defaultData.trigger = {\n          ...prefilled.trigger,\n          appKey: prefilled.trigger.appKey,\n          inputParams: prefilled.trigger.inputParams ?? {},\n        };\n      }\n\n      if (prefilled.action?.appKey != null) {\n        defaultData.action = {\n          ...prefilled.action,\n          appKey: prefilled.action.appKey,\n          inputParams: prefilled.action.inputParams ?? {},\n        };\n      }\n\n      return defaultData;\n    });\n\n  const createAutomation = async (data: AutomationFormData) => {\n    const onBeforeAutomationCreateReturn = await onBeforeAutomationCreate?.({\n      automationData: data,\n    });\n\n    if (onBeforeAutomationCreateReturn === false) {\n      // Abort creating automation\n      return;\n    }\n\n    const automationData =\n      onBeforeAutomationCreateReturn === true ||\n      onBeforeAutomationCreateReturn === undefined\n        ? data\n        : onBeforeAutomationCreateReturn.automationData;\n\n    const automation = await createAutomationMutation.mutateAsync(\n      automationData\n    );\n\n    onAutomationCreated({ automation });\n  };\n\n  return (\n    <div className=\"rollout-automation-creator\">\n      <AutomationForm\n        mode=\"create\"\n        data={automationFormData}\n        renderFields={renderFields}\n        onUpdate={setAutomationFormData}\n        isSaving={createAutomationMutation.isLoading}\n        onSave={createAutomation}\n        onCancel={onCancel}\n      />\n    </div>\n  );\n}\n","import React, { useCallback, useMemo } from \"react\";\nimport { useState } from \"react\";\nimport { useSpinDelay } from \"spin-delay\";\n\nimport { useQuery, useTRPCContext } from \"@rollouthq/api-client-react\";\nimport { inputDefToZodObject } from \"@rollouthq/common\";\nimport { useTriggerRendererData } from \"@rollouthq/connect-react/components/automation-form/get-trigger-renderer-data\";\nimport { useRolloutAllowedAppsContext } from \"@rollouthq/connect-react/contexts/allowed-apps-context\";\nimport { useActionsQuery } from \"@rollouthq/connect-react/hooks/use-actions-query\";\nimport { useAppsQuery } from \"@rollouthq/connect-react/hooks/use-apps-query\";\nimport { useCredentialHandler } from \"@rollouthq/connect-react/hooks/use-credential-handler\";\nimport { FormContextProvider } from \"@rollouthq/connect-react/utils/form\";\nimport { dataAttr, useToggle, Spinner, useAsyncMemo } from \"@rollouthq/ui\";\n\nimport { ActionAppKeyField } from \"./action-app-key-input\";\nimport { ActionCredentialIdField } from \"./action-credential-id-input\";\nimport { ActionKeyField } from \"./action-key-select-input\";\nimport { AutomationFormAction } from \"./automation-form-action\";\nimport { ActionInputFields } from \"./automation-form-action-inputs\";\nimport { AutomationFormTrigger } from \"./automation-form-trigger\";\nimport { AutomationFormContextProvider } from \"./context\";\nimport { useActionRendererData } from \"./get-action-renderer-data\";\nimport { RenderFields, renderField } from \"./helpers/render-field\";\nimport { TriggerAppKeyField } from \"./helpers/trigger-app-key-input\";\nimport { TriggerKeyField } from \"./helpers/trigger-key-input\";\nimport { NameField } from \"./name-input\";\nimport {\n  AutomationFormData,\n  PartialAutomationFormData,\n  useValidateAutomationFormData,\n  zAutomationFormSchema,\n} from \"./types\";\n\nexport type AutomationFormProps = {\n  data: PartialAutomationFormData;\n  onUpdate: (\n    updater: (\n      currentData: PartialAutomationFormData\n    ) => PartialAutomationFormData\n  ) => void;\n  onSave: (data: AutomationFormData) => void;\n  onCancel?: () => void;\n  onDelete?: () => void;\n  isSaving: boolean;\n  mode: \"edit\" | \"create\";\n  renderFields?: RenderFields;\n};\n\nexport function AutomationForm(props: AutomationFormProps) {\n  const {\n    data,\n    isSaving,\n    onSave,\n    onCancel,\n    onUpdate,\n    onDelete,\n    mode,\n    renderFields,\n  } = props;\n\n  const [shouldShowErrors, setShouldShowErrors] = useState(false);\n  const [isOpen, toggleDeleteMenu] = useToggle();\n  const { client } = useTRPCContext();\n\n  const triggersQuery = useQuery(\n    [\"apps.triggers\", { appKey: data.trigger?.appKey! }],\n    { enabled: data.trigger?.appKey != null }\n  );\n\n  const selectedTrigger = triggersQuery.data?.find(\n    (t) => t.key === data.trigger?.triggerKey\n  );\n\n  const triggerPayloadSchemaAsync = useAsyncMemo(async () => {\n    if (selectedTrigger == null) {\n      return [];\n    }\n    if (selectedTrigger.payloadConfiguration.type === \"static\") {\n      return selectedTrigger.payloadConfiguration.staticSchema;\n    }\n    return await client.query(\"triggers.getPayloadSchema\", {\n      appKey: data.trigger?.appKey!,\n      triggerKey: data.trigger?.triggerKey!,\n      inputParams: data.trigger?.inputParams!,\n    });\n  }, [\n    JSON.stringify(selectedTrigger?.payloadConfiguration),\n    JSON.stringify(data.trigger),\n  ]);\n\n  const triggerPayloadVariables = useMemo(\n    () =>\n      (triggerPayloadSchemaAsync.value ?? []).map((prop) => ({\n        id: prop.key,\n        label: prop.label,\n        type: \"string\" as const,\n      })),\n    [triggerPayloadSchemaAsync.value]\n  );\n\n  const { allowedApps } = useRolloutAllowedAppsContext();\n\n  const apps = useAppsQuery({ allowedApps });\n  const actions = useActionsQuery(data.action);\n  const actionRendererData = useActionRendererData({ actionRef: data.action });\n  const triggerRendererData = useTriggerRendererData(data.trigger);\n\n  const triggerInputParamsSchema = useMemo(() => {\n    if (triggerRendererData == null) {\n      return zAutomationFormSchema.shape.action.shape.inputParams;\n    }\n    if (\"inputParamsSchema\" in triggerRendererData) {\n      return triggerRendererData.inputParamsSchema;\n    } else {\n      return inputDefToZodObject(triggerRendererData.inputParamDefs);\n    }\n  }, [triggerRendererData]);\n\n  const actionInputParamsSchema = useMemo(() => {\n    if (actionRendererData == null) {\n      return zAutomationFormSchema.shape.action.shape.inputParams;\n    }\n    if (\"inputParamsSchema\" in actionRendererData) {\n      return actionRendererData.inputParamsSchema;\n    } else {\n      return inputDefToZodObject(actionRendererData.inputParamDefs);\n    }\n  }, [actionRendererData]);\n\n  const validation = useValidateAutomationFormData({\n    data,\n    triggerInputParamsSchema,\n    actionInputParamsSchema,\n  });\n\n  const setData = useCallback(\n    (\n      updater: (\n        currentData: PartialAutomationFormData\n      ) => PartialAutomationFormData\n    ) =>\n      onUpdate((currentData) => {\n        const newData = updater(currentData);\n\n        const didChangeTrigger =\n          currentData.trigger?.triggerKey !== newData.trigger?.triggerKey;\n\n        const newAction =\n          newData.action == null\n            ? undefined\n            : {\n                ...newData.action,\n                inputParams: didChangeTrigger ? {} : newData.action.inputParams,\n              };\n\n        return {\n          ...newData,\n          action: newAction,\n        };\n      }),\n    [onUpdate]\n  );\n\n  const context = useMemo(\n    () => ({\n      data,\n      apps,\n      actions,\n      validation,\n      variables: triggerPayloadVariables,\n      setData,\n      renderFields,\n    }),\n    [\n      data,\n      apps,\n      actions,\n      validation,\n      triggerPayloadVariables,\n      setData,\n      renderFields,\n    ]\n  );\n\n  const formContext = useMemo(\n    () => ({ shouldShowErrors, setShouldShowErrors }),\n    [shouldShowErrors, setShouldShowErrors]\n  );\n\n  const setTriggerCredentialId = useCallback(\n    (newCredentialId: string) =>\n      setData((currentData) => ({\n        ...currentData,\n        trigger: {\n          ...currentData.trigger!,\n          credentialId: newCredentialId,\n        },\n      })),\n    [setData]\n  );\n\n  const setActionCredentialId = useCallback(\n    (newCredentialId: string) =>\n      setData((currentData) => ({\n        ...currentData,\n        action: {\n          ...currentData.action!,\n          credentialId: newCredentialId,\n        },\n      })),\n    [setData]\n  );\n\n  useCredentialHandler({\n    appKey: data.trigger?.appKey,\n    setCredentialId: setTriggerCredentialId,\n  });\n\n  useCredentialHandler({\n    appKey: data.action?.appKey,\n    setCredentialId: setActionCredentialId,\n  });\n\n  const hasNullData = apps.data == null;\n  const showSpinner = useSpinDelay(hasNullData, {\n    delay: 500,\n    minDuration: 200,\n  });\n\n  const errorFetchingData = apps.failureCount > 0;\n\n  if (errorFetchingData) {\n    return (\n      <div className=\"rollout-automations-list__error-msg\">\n        Woops! Something went wrong fetching automations.\n      </div>\n    );\n  }\n\n  if (hasNullData || showSpinner) {\n    return (\n      <div className=\"rollout__loading_spinner_container\">\n        <Spinner className=\"rollout__loading_spinner\" />\n      </div>\n    );\n  }\n\n  const nameField = renderField({\n    defaultField: NameField,\n    renderer: renderFields?.name,\n    ctx: { NameField },\n  });\n\n  const triggerField =\n    typeof renderFields?.trigger === \"object\" ? (\n      <AutomationFormTrigger />\n    ) : (\n      renderField({\n        defaultField: AutomationFormTrigger,\n        renderer: renderFields?.trigger,\n        ctx: { TriggerAppKeyField, TriggerKeyField },\n      })\n    );\n\n  const actionField =\n    typeof renderFields?.action === \"object\" ? (\n      <AutomationFormAction />\n    ) : (\n      renderField({\n        defaultField: AutomationFormAction,\n        renderer: renderFields?.action,\n        ctx: {\n          ActionAppKeyField,\n          ActionKeyField,\n          ActionCredentialIdField,\n          ActionInputFields,\n        },\n      })\n    );\n\n  return (\n    <FormContextProvider value={formContext}>\n      <AutomationFormContextProvider value={context}>\n        <div className=\"rollout-automation-form\">\n          <div className=\"rollout-automation-form__header\">{nameField}</div>\n\n          <div className=\"rollout-automation-form__content\">\n            {triggerField}\n            {actionField}\n          </div>\n\n          <div className=\"rollout-automation-form__buttons\">\n            <button\n              type=\"button\"\n              aria-label=\"Save button\"\n              className=\"rollout-button--primary rollout-automation-form__submit\"\n              data-loading={dataAttr(isSaving)}\n              onClick={() => {\n                setShouldShowErrors(true);\n                if (validation.success) {\n                  onSave(validation.data);\n                } else {\n                  console.error(validation.error);\n                }\n              }}\n            >\n              {isSaving ? \"Saving...\" : \"Save\"}\n            </button>\n\n            {onCancel != null && (\n              <button\n                type=\"button\"\n                aria-label=\"Cancel button\"\n                className=\"rollout-button--secondary rollout-automation-form__cancel\"\n                onClick={() => onCancel()}\n              >\n                Cancel\n              </button>\n            )}\n\n            {mode !== \"create\" && (\n              <div className=\"rollout-automation-form__delete\">\n                {isOpen && (\n                  <div className=\"rollout-automation-form-delete__confirm-dialog\">\n                    <div className=\"rollout-automation-form__delete-confirm-text\">\n                      Are you sure you want to delete this automation?\n                    </div>\n\n                    <div className=\"rollout-automation-form__delete-confirm-buttons\">\n                      <button\n                        type=\"button\"\n                        aria-label=\"Cancel deletion button\"\n                        onClick={toggleDeleteMenu}\n                        className=\"rollout-button--secondary rollout-automation-form__delete-cancel\"\n                      >\n                        No, cancel\n                      </button>\n\n                      <button\n                        type=\"button\"\n                        aria-label=\"Confirm deletion button\"\n                        onClick={onDelete}\n                        className=\"rollout-button--danger rollout-automation-form__delete-confirm\"\n                      >\n                        Yes, delete\n                      </button>\n                    </div>\n                  </div>\n                )}\n\n                <button\n                  type=\"button\"\n                  aria-label=\"Delete button\"\n                  className=\"rollout-button--danger rollout-automations-form-delete__trigger\"\n                  onClick={toggleDeleteMenu}\n                >\n                  Delete\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </AutomationFormContextProvider>\n    </FormContextProvider>\n  );\n}\n","import React, { FunctionComponent, useLayoutEffect } from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { AnyZodObject } from \"zod\";\n\nimport { isVariable, z } from \"@rollouthq/common\";\nimport * as ActionInputs from \"@rollouthq/connect-react/components/action-inputs\";\nimport { AppComponentRendererContext } from \"@rollouthq/connect-react/components/app-component-renderer/app-component-renderer-context\";\nimport { PartialTriggerRef } from \"@rollouthq/connect-react/components/automation-form/types\";\nimport { useRolloutApiBaseUrlContext } from \"@rollouthq/connect-react/contexts/api-base-url-context\";\n\nconst useSafeLayoutEffect =\n  typeof document === \"undefined\" ? useEffect : useLayoutEffect;\n\nexport type UseTriggerRendererDataParams = PartialTriggerRef | undefined;\n\nexport type UseTriggerRendererData =\n  | AppComponentRendererContext[\"importedData\"]\n  | undefined;\n\nexport function useTriggerRendererData(\n  opts: UseTriggerRendererDataParams\n): UseTriggerRendererData {\n  const { apiBaseUrl } = useRolloutApiBaseUrlContext();\n\n  const [triggerRendererData, setTriggerRendererData] =\n    useState<UseTriggerRendererData>();\n\n  useSafeLayoutEffect(() => {\n    Object.assign(window, {\n      ROLLOUT_CONNECT_DEPS: {\n        zod: { z },\n        react: React,\n        [\"@rollouthq/common\"]: { z, isVariable },\n        [\"@rollouthq/connect-react/components/action-inputs\"]: ActionInputs,\n      },\n    });\n  }, []);\n\n  useSafeLayoutEffect(() => {\n    if (opts == null) {\n      return setTriggerRendererData(undefined);\n    }\n\n    if (!opts.appKey || !opts.triggerKey) {\n      return;\n    }\n\n    const importPath = `${apiBaseUrl}/connect-react/${opts.appKey}/triggers/${opts.triggerKey}.js`;\n    // Workaround to preserve es2020 dynamic import instead of transpiling it\n    // equivalent for:\n    // import(importPath).then(setTriggerRendererData);\n    const fnImport = new Function(\"path\", \"return import(path)\");\n\n    fnImport(importPath).then(\n      (data: {\n        Component: FunctionComponent;\n        inputParamsSchema: AnyZodObject;\n      }) => {\n        setTriggerRendererData(data);\n      }\n    );\n  }, [JSON.stringify(opts)]);\n\n  return triggerRendererData;\n}\n","export * from \"./dropdown-input\";\nexport * from \"./find-by\";\nexport * from \"./rich-text-input\";\nexport * from \"./multiselect-input\";\nexport * from \"./boolean-input\";\nexport * from \"./no-inputs\";\nexport * from \"./types\";\n","import React, { useEffect, useState } from \"react\";\n\nimport { isVariable, ROLLOUTHQ_VARIABLE_PREFIX } from \"@rollouthq/common\";\nimport { ActionInputProps } from \"@rollouthq/connect-react/components/action-inputs\";\nimport { ActionInputFormControl } from \"@rollouthq/connect-react/components/action-inputs/helpers/action-input-form-control\";\nimport { useAppComponentRendererContext } from \"@rollouthq/connect-react/components/app-component-renderer/app-component-renderer-context\";\nimport { useAutomationInputParam } from \"@rollouthq/connect-react/components/app-component-renderer/use-automation-input-param\";\nimport {\n  FieldProps,\n  renderField,\n} from \"@rollouthq/connect-react/components/automation-form/helpers/render-field\";\nimport { useFormContext } from \"@rollouthq/connect-react/utils/form\";\nimport {\n  ComboBox,\n  ComboBoxItem,\n  ComboBoxProps,\n  ComboBoxSection,\n  createContext,\n} from \"@rollouthq/ui\";\n\nexport type DropdownOption = {\n  id: string;\n  name: string;\n};\n\nexport type DropdownInputProps = ActionInputProps<string | undefined> & {\n  allowOnlyVariables?: boolean;\n  dependencies?: string[];\n  isDisabled?: boolean;\n  fetchOptions: () =>\n    | Promise<readonly DropdownOption[]>\n    | readonly DropdownOption[];\n} & Omit<\n    ComboBoxProps<Record<string, any>>,\n    \"children\" | \"defaultItems\" | \"selectedOption\"\n  >;\n\nconst [DropdownInputContextProvider, useDropdownInputContext] =\n  createContext<DropdownInputProps>({\n    name: \"DropdownInput\",\n  });\n\nexport function DropdownInput(props: DropdownInputProps) {\n  const param = useAutomationInputParam(props.bind);\n  const paramName = param.path.join(\".\");\n  const { renderInputParams: renderParams } = useAppComponentRendererContext();\n\n  const field = renderField({\n    defaultField: DropdownInputField,\n    renderer: renderParams?.[paramName],\n    ctx: { InputParamField: DropdownInputField },\n  });\n\n  return (\n    <DropdownInputContextProvider value={props}>\n      {field}\n    </DropdownInputContextProvider>\n  );\n}\n\nfunction DropdownInputField(props: FieldProps) {\n  const ctx = useDropdownInputContext();\n\n  const { bind, dependencies, fetchOptions, allowOnlyVariables } = ctx;\n\n  const param = useAutomationInputParam(bind);\n  const { value, setValue } = param;\n  const label = ctx.label ?? param.label;\n  const description = ctx.description ?? param.description;\n  const placeholder = ctx.placeholder || \"Select option\";\n\n  const [options, setOptions] = useState<readonly DropdownOption[]>([]);\n  const [isLoadingOptions, setIsLoadingOptions] = useState(false);\n\n  const { shouldShowErrors } = useFormContext();\n  const { variables, disabled: disabledFromContext } =\n    useAppComponentRendererContext();\n\n  const disabled =\n    ctx.isDisabled ||\n    disabledFromContext ||\n    (dependencies != null && dependencies.every(Boolean) !== true) ||\n    props.disabled;\n\n  useEffect(() => {\n    async function refetch() {\n      setIsLoadingOptions(true);\n      const dropDownOptions = await fetchOptions();\n      setOptions(dropDownOptions);\n      setIsLoadingOptions(false);\n    }\n    if (!allowOnlyVariables && !disabled) {\n      refetch();\n    }\n  }, [JSON.stringify(dependencies), allowOnlyVariables, disabled]);\n\n  useEffect(() => {\n    if (allowOnlyVariables && value && !isVariable(value)) {\n      setValue(undefined);\n    }\n  }, [allowOnlyVariables, value]);\n\n  const variableOptions = variables.map((v) => ({\n    id: `${ROLLOUTHQ_VARIABLE_PREFIX}${v.id}`,\n    name: `@${v.label}`,\n  }));\n  const allOptions = [...variableOptions, ...options];\n  const selectedOption = allOptions.find((opt) => opt.id === value);\n\n  const variableOptionsDisplay = (\n    <ComboBox<typeof variableOptions[number]>\n      aria-label=\"Variable dropdown\"\n      optionKey=\"id\"\n      isDisabled={disabled}\n      defaultItems={variableOptions}\n      menuTrigger=\"focus\"\n      selectedOption={selectedOption}\n      isLoading={isLoadingOptions}\n      inputPlaceholder={placeholder}\n      onSelectionChange={(newItem) => setValue(newItem?.id)}\n    >\n      <ComboBoxSection title=\"Variables\">\n        {variableOptions.map((opt) => (\n          <ComboBoxItem key={opt.id}>{opt.name}</ComboBoxItem>\n        ))}\n      </ComboBoxSection>\n    </ComboBox>\n  );\n\n  const allVariableOptionsDisplay = (\n    <ComboBox<typeof allOptions[number]>\n      aria-label=\"Variable dropdown\"\n      optionKey=\"id\"\n      isDisabled={disabled}\n      defaultItems={allOptions}\n      menuTrigger=\"focus\"\n      selectedOption={selectedOption}\n      key={value}\n      isLoading={isLoadingOptions}\n      inputPlaceholder={placeholder}\n      onSelectionChange={(newItem) => setValue(newItem?.id)}\n    >\n      <ComboBoxSection title=\"Options\">\n        {options.map((opt) => (\n          <ComboBoxItem key={opt.id}>{opt.name}</ComboBoxItem>\n        ))}\n      </ComboBoxSection>\n      <ComboBoxSection title=\"Variables\">\n        {variableOptions.map((opt) => (\n          <ComboBoxItem key={opt.id}>{opt.name}</ComboBoxItem>\n        ))}\n      </ComboBoxSection>\n    </ComboBox>\n  );\n\n  const optionsDisplay = allowOnlyVariables\n    ? variableOptionsDisplay\n    : allVariableOptionsDisplay;\n\n  return (\n    <ActionInputFormControl\n      bind={bind}\n      label={label}\n      description={description}\n      error={shouldShowErrors ? param.error?.message : undefined}\n      isRequired={!param.isOptional}\n    >\n      {optionsDisplay}\n    </ActionInputFormControl>\n  );\n}\n","import React from \"react\";\nimport { ReactElement } from \"react\";\n\nimport { useAppComponentRendererContext } from \"@rollouthq/connect-react/components/app-component-renderer/app-component-renderer-context\";\nimport { useAutomationInputParam } from \"@rollouthq/connect-react/components/app-component-renderer/use-automation-input-param\";\nimport { StyledInputFormControl } from \"@rollouthq/connect-react/components/styled-input-form-control\";\nimport { Flex, UserForm } from \"@rollouthq/ui\";\n\nexport type ActionInputFormControlProps = {\n  bind: any;\n  label?: string;\n  description?: string;\n  error?: string;\n  isRequired?: boolean;\n  children: ReactElement;\n};\n\nexport function ActionInputFormControl(props: ActionInputFormControlProps) {\n  const { bind, children, description, error, isRequired = false } = props;\n\n  const { credentialId, isBlueprintActivation = false } =\n    useAppComponentRendererContext();\n\n  const param = useAutomationInputParam(bind);\n\n  const isProvidedByUserPlaceholder =\n    param.isCredentialDependent &&\n    credentialId == null &&\n    !isBlueprintActivation;\n\n  if (isBlueprintActivation && !param.isCredentialDependent) {\n    return null;\n  }\n\n  function getChildren() {\n    if (isProvidedByUserPlaceholder) {\n      return (\n        <Flex\n          css={{\n            alignItems: \"center\",\n            padding: \"8px\",\n            backgroundColor: \"$surfaceSecondary\",\n            borderRadius: \"4px\",\n            color: \"$grayMedium\",\n            fontSize: \"13px\",\n            fontWeight: 500,\n          }}\n        >\n          <UserForm css={{ marginRight: \"6px\" }} />\n          Input provided by user when automation is activated\n        </Flex>\n      );\n    }\n\n    return children;\n  }\n\n  const label = props.label ?? \"\";\n\n  return (\n    <StyledInputFormControl\n      description={description}\n      error={error}\n      isRequired={isRequired}\n      label={label}\n    >\n      {getChildren()}\n    </StyledInputFormControl>\n  );\n}\n","import { FunctionComponent } from \"react\";\nimport { ObjPathProxy } from \"ts-object-path\";\nimport { AnyZodObject, z } from \"zod\";\n\nimport { TRPCClient, useQuery } from \"@rollouthq/api-client-react\";\nimport { CustomerTriggerDropdownInputOption } from \"@rollouthq/api/engine/customers/get-customer-trigger-dropdown-options\";\nimport { InputDefOutput } from \"@rollouthq/api/engine/inputs/inputs-configuration\";\nimport { Variable } from \"@rollouthq/common\";\nimport * as inputComponents from \"@rollouthq/connect-react/components/action-inputs\";\nimport {\n  FieldComponent,\n  RenderCbOrBool,\n} from \"@rollouthq/connect-react/components/automation-form/helpers/render-field\";\nimport { createContext } from \"@rollouthq/ui\";\n\nexport type AppComponentProps<Params extends AnyZodObject> = {\n  /**\n   * Proxy object used to bind `inputParams` properties to inputs.\n   * Can't be used to access the actual data!\n   * @example\n   * <RichTextInput bind={b.to} label=\"To\" />\n   */\n  b: ObjPathProxy<z.infer<Params>, z.infer<Params>>;\n  credentialId: string;\n  inputParams: z.infer<Params>;\n  setInputParams: (newParams: z.infer<Params>) => void;\n  api: TRPCClient;\n  useQuery: typeof useQuery;\n  inputComponents: typeof inputComponents;\n};\n\nexport type AppComponentRendererContext = {\n  api: TRPCClient;\n  credentialId: string;\n  setInputParams: (newParams: Record<string, any>) => void;\n  inputParams: Record<string, any>;\n  variables: readonly Variable[];\n  getDynamicOptions: (opts: {\n    inputKey: string;\n  }) => Promise<CustomerTriggerDropdownInputOption[]>;\n  importedData:\n    | {\n        inputParamsSchema: AnyZodObject;\n        Component: FunctionComponent<AppComponentProps<AnyZodObject>>;\n      }\n    | {\n        inputParamDefs: InputDefOutput[];\n      };\n  isBlueprintActivation?: boolean;\n  disabled?: boolean;\n  renderInputParams:\n    | {\n        [param: string]: RenderCbOrBool<{ InputParamField: FieldComponent }>;\n      }\n    | undefined;\n};\n\nexport const [\n  AppComponentRendererContextProvider,\n  useAppComponentRendererContext,\n] = createContext<AppComponentRendererContext>({\n  name: \"AppComponentRenderer\",\n});\n","import { useCallback } from \"react\";\nimport { get, getPath, ObjPathProxy, set } from \"ts-object-path\";\nimport { SafeParseReturnType, ZodIssue } from \"zod\";\n\nimport { Meta } from \"@rollouthq/api/@types/zod\";\nimport { inputDefToZodObject } from \"@rollouthq/common\";\n\nimport { useAppComponentRendererContext } from \"./app-component-renderer-context\";\nimport { getAutomationInputParamSchema } from \"./use-automation-input-param-schema\";\n\nexport function useAutomationInputParam<T extends any>(\n  bind: ObjPathProxy<any, T>\n): {\n  path: PropertyKey[];\n  value: T;\n  setValue: (newVal: T) => void;\n  isOptional: boolean;\n  label: string;\n  description: string;\n  isCredentialDependent: boolean;\n  error: ZodIssue | undefined;\n} {\n  const ctx = useAppComponentRendererContext();\n  const {\n    inputParams,\n    setInputParams,\n    importedData,\n    credentialId,\n    isBlueprintActivation,\n  } = ctx;\n\n  const path = getPath(bind);\n  const value = get(inputParams, bind) as T;\n\n  const setValue = useCallback(\n    (newValue: T) => {\n      const newInputParams = structuredClone(inputParams);\n      set(newInputParams, bind, newValue);\n      setInputParams(newInputParams);\n    },\n    [setInputParams, inputParams]\n  );\n\n  const inputParamsSchema =\n    \"inputParamsSchema\" in importedData\n      ? importedData.inputParamsSchema\n      : inputDefToZodObject(importedData.inputParamDefs);\n\n  const schema = getAutomationInputParamSchema(inputParamsSchema, bind);\n  const isOptional = schema.isOptional();\n  const meta = schema.description as any as Meta | undefined;\n  const label = meta?.label ?? pathToLabel(path);\n  const description = meta?.description ?? \"\";\n  const isCredentialDependent = meta?.isCredentialDependent ?? false;\n\n  const validation = inputParamsSchema.safeParse(inputParams);\n  const error =\n    isCredentialDependent && credentialId == null && !isBlueprintActivation\n      ? undefined\n      : getAutomationInputParamValidation(validation, bind);\n\n  return {\n    value,\n    setValue,\n    isOptional,\n    label,\n    description,\n    isCredentialDependent,\n    error,\n    path,\n  };\n}\n\nfunction getAutomationInputParamValidation(\n  validation: SafeParseReturnType<any, any>,\n  bind: ObjPathProxy<any, any> | undefined\n) {\n  const path = getPath(bind!);\n\n  if (validation.success) {\n    return undefined;\n  }\n\n  return validation.error.issues.find((err) => {\n    return err.path.join(\".\") === path.join(\".\");\n  });\n}\n\nfunction pathToLabel(path: PropertyKey[]) {\n  return path\n    .map((prop) => camelCaseToSpaceSeparated(prop.toString()))\n    .join(\" \");\n}\n\nfunction camelCaseToSpaceSeparated(str: string) {\n  const spaceSeparated = str.replace(\n    /([A-Z\\d])/g,\n    (char) => ` ${char.toLowerCase()}`\n  );\n\n  return `${spaceSeparated[0].toUpperCase()}${spaceSeparated.slice(1)}`;\n}\n","import { getPath, ObjPathProxy } from \"ts-object-path\";\nimport {\n  AnyZodObject,\n  ZodFirstPartySchemaTypes,\n  ZodObject,\n  ZodOptional,\n  ZodRecord,\n} from \"zod\";\n\nexport function getAutomationInputParamSchema(\n  inputParamsSchema: AnyZodObject,\n  bind: ObjPathProxy<any, any>\n) {\n  const bindPath = getPath(bind);\n  const prop = getByPath(inputParamsSchema, bindPath);\n  return prop;\n}\n\nfunction getByPath(\n  schema: ZodFirstPartySchemaTypes,\n  path: PropertyKey[]\n): ZodFirstPartySchemaTypes {\n  const restPath = path.slice(1);\n  const unwrappedType =\n    schema instanceof ZodOptional ? schema.unwrap() : schema;\n\n  if (unwrappedType instanceof ZodObject) {\n    const prop = unwrappedType.shape[path[0]];\n    return path.length > 1 ? getByPath(prop, restPath) : prop;\n  }\n\n  if (unwrappedType instanceof ZodRecord) {\n    const prop = unwrappedType.valueSchema;\n    return path.length > 1 ? getByPath(prop, restPath) : prop;\n  }\n\n  console.error(\"getByPath: unhandled prop type:\", unwrappedType);\n  throw new Error(`getByPath: unhandled prop type`);\n}\n","import React from \"react\";\nimport { ReactNode } from \"react\";\n\nimport { dataAttr } from \"@rollouthq/ui\";\n\nexport type StyledInputFormControlProps = {\n  children: ReactNode;\n  label: string;\n  description?: string;\n  error: string | undefined;\n  isRequired: boolean;\n};\n\nexport function StyledInputFormControl(props: StyledInputFormControlProps) {\n  const { label, description, error, isRequired, children } = props;\n\n  return (\n    <div className=\"rollout-form-control\">\n      {label && (\n        <div className=\"rollout-form-control__label\">\n          {label}\n          {isRequired && (\n            <span className=\"rollout-form-control__required-hint\">\n              {\" \"}\n              (required)\n            </span>\n          )}\n        </div>\n      )}\n\n      {description && (\n        <div className=\"rollout-form-control__description\">{description}</div>\n      )}\n\n      <div\n        className=\"rollout-form-control__input\"\n        data-error={dataAttr(!!error)}\n      >\n        {children}\n      </div>\n\n      {error && <div className=\"rollout-form-control__error\">{error}</div>}\n    </div>\n  );\n}\n","import React, {\n  createElement,\n  FunctionComponent,\n  ReactNode,\n  VoidFunctionComponent,\n} from \"react\";\n\nimport { Card } from \"@rollouthq/connect-react/components/card\";\n\nexport type RenderCb<Ctx extends {}> = (\n  ctx: Ctx & {\n    createElement: typeof createElement;\n    Card: typeof Card;\n  }\n) => ReactNode;\n\nexport type RenderCbOrBool<Ctx extends {}> = RenderCb<Ctx> | boolean;\n\nexport type FieldProps = {\n  disabled?: boolean;\n};\n\nexport type FieldComponent = FunctionComponent<FieldProps>;\n\nexport type TriggerRenderCb = RenderCbOrBool<{\n  TriggerAppKeyField: FieldComponent;\n  TriggerKeyField: FieldComponent;\n}>;\n\nexport type ActionRenderCb = RenderCbOrBool<{\n  ActionAppKeyField: FieldComponent;\n  ActionKeyField: FieldComponent;\n  ActionCredentialIdField: FieldComponent;\n  ActionInputFields: FieldComponent;\n}>;\n\nexport type RenderFields = {\n  name?: RenderCbOrBool<{ NameField: FieldComponent }>;\n  trigger?:\n    | TriggerRenderCb\n    | {\n        appKey?: RenderCbOrBool<{ TriggerAppKeyField: FieldComponent }>;\n        triggerKey?: RenderCbOrBool<{ TriggerKeyField: FieldComponent }>;\n        inputParams?: {\n          [param: string]: RenderCbOrBool<{ InputParamField: FieldComponent }>;\n        };\n      };\n  action?:\n    | ActionRenderCb\n    | {\n        appKey?: RenderCbOrBool<{ ActionAppKeyField: FieldComponent }>;\n        actionKey?: RenderCbOrBool<{ ActionKeyField: FieldComponent }>;\n        credentialId?: RenderCbOrBool<{\n          ActionCredentialIdField: FieldComponent;\n        }>;\n        inputParams?: {\n          [param: string]: RenderCbOrBool<{ InputParamField: FieldComponent }>;\n        };\n      };\n};\n\nexport function renderField<Ctx extends {}>(opts: {\n  defaultField: VoidFunctionComponent<{}>;\n  ctx: Ctx;\n  renderer: RenderCbOrBool<Ctx> | undefined;\n}) {\n  const { defaultField: DefaultField, ctx, renderer } = opts;\n\n  if (renderer == null || renderer === true) {\n    return <DefaultField />;\n  }\n\n  if (renderer === false) {\n    return null;\n  }\n\n  return renderer({\n    ...ctx,\n    createElement,\n    Card,\n  });\n}\n","import React, { ReactNode } from \"react\";\n\nexport function Card(props: { children: ReactNode }) {\n  return <div className=\"rollout-card\">{props.children}</div>;\n}\n","import { createContext } from \"@rollouthq/ui\";\n\nexport type FormContext = {\n  shouldShowErrors: boolean;\n  setShouldShowErrors: (show: boolean) => void;\n};\n\nexport const [FormContextProvider, useFormContext] = createContext<FormContext>(\n  {\n    name: \"Form\",\n  }\n);\n","import React, { ReactElement, useEffect } from \"react\";\n\nimport { ActionInputFormControl } from \"@rollouthq/connect-react/components/action-inputs/helpers/action-input-form-control\";\nimport { useAutomationInputParam } from \"@rollouthq/connect-react/components/app-component-renderer/use-automation-input-param\";\nimport { useFormContext } from \"@rollouthq/connect-react/utils/form\";\n\nimport { ActionInputProps } from \"./types\";\n\ntype FindByInputProps = ActionInputProps<string | undefined> & {\n  filterInput: ReactElement;\n  filterValueInput: ReactElement;\n  selectInput: ReactElement;\n  resource: string;\n};\n\nexport function FindBy(props: FindByInputProps) {\n  const { filterInput, filterValueInput, selectInput } = props;\n  const { bind } = props;\n  const param = useAutomationInputParam(bind);\n  const { shouldShowErrors } = useFormContext();\n  const { value, setValue, isOptional } = param;\n  const label = props.label ?? param.label;\n  const description = props.description ?? param.description;\n\n  useEffect(() => {\n    if (value == null) {\n      setValue(\"filter\");\n    }\n  }, [value]);\n\n  return (\n    <>\n      <ActionInputFormControl\n        bind={bind}\n        label={label}\n        isRequired={!isOptional}\n        description={description}\n        error={shouldShowErrors ? param.error?.message : undefined}\n      >\n        <div className=\"rollout-form-control-find__container\">\n          <button\n            type=\"button\"\n            aria-label=\"Search from list button\"\n            className={\n              value == \"select\"\n                ? \"rollout-form-control-find__active\"\n                : \"rollout-form-control-find__disabled\"\n            }\n            onClick={() => setValue(\"select\")}\n          >\n            From list\n          </button>\n          <button\n            type=\"button\"\n            aria-label=\"Search by filter button\"\n            className={\n              value == \"filter\"\n                ? \"rollout-form-control-find__active\"\n                : \"rollout-form-control-find__disabled\"\n            }\n            onClick={() => setValue(\"filter\")}\n          >\n            From search\n          </button>\n        </div>\n      </ActionInputFormControl>\n\n      {value == \"filter\" && filterInput}\n      {value == \"filter\" && filterValueInput}\n      {value == \"select\" && selectInput}\n    </>\n  );\n}\n","import React, { useCallback, useMemo } from \"react\";\n\nimport { resolveMentions } from \"@rollouthq/common\";\nimport { ActionInputFormControl } from \"@rollouthq/connect-react/components/action-inputs/helpers/action-input-form-control\";\nimport { useAppComponentRendererContext } from \"@rollouthq/connect-react/components/app-component-renderer/app-component-renderer-context\";\nimport { useAutomationInputParam } from \"@rollouthq/connect-react/components/app-component-renderer/use-automation-input-param\";\nimport {\n  FieldProps,\n  renderField,\n} from \"@rollouthq/connect-react/components/automation-form/helpers/render-field\";\nimport { useFormContext } from \"@rollouthq/connect-react/utils/form\";\nimport {\n  RichEditorProps,\n  RichEditorContent,\n  RichEditor,\n  createContext,\n} from \"@rollouthq/ui\";\n\nimport { ActionInputProps } from \"./types\";\n\nexport type RichTextInputProps = ActionInputProps<\n  RichEditorContent | undefined\n> & {\n  inputProps?: Omit<RichEditorProps, \"value\" | \"setValue\">;\n  isRequired?: boolean;\n  disabled?: boolean;\n};\n\nconst [RichTextInputContextProvider, useRichTextInputContext] =\n  createContext<RichTextInputProps>({\n    name: \"RichTextInput\",\n  });\n\nexport function RichTextInput(props: RichTextInputProps) {\n  const param = useAutomationInputParam(props.bind);\n  const paramName = param.path.join(\".\");\n  const { renderInputParams: renderParams } = useAppComponentRendererContext();\n\n  const field = renderField({\n    defaultField: RichTextInputField,\n    renderer: renderParams?.[paramName],\n    ctx: { InputParamField: RichTextInputField },\n  });\n\n  return (\n    <RichTextInputContextProvider value={props}>\n      {field}\n    </RichTextInputContextProvider>\n  );\n}\n\nfunction RichTextInputField(props: FieldProps) {\n  const ctx = useRichTextInputContext();\n  const { bind, inputProps, placeholder } = ctx;\n  const param = useAutomationInputParam(bind);\n  const label = ctx.label ?? param.label;\n  const description = ctx.description ?? param.description;\n  const appComponentRendererCtx = useAppComponentRendererContext();\n  const { variables } = appComponentRendererCtx;\n  const { shouldShowErrors } = useFormContext();\n  const disabled =\n    appComponentRendererCtx.disabled || ctx.disabled || props.disabled;\n  const isRequired = !param.isOptional || ctx.isRequired;\n\n  const setValue = useCallback(\n    (val: RichEditorContent | null) => {\n      param.setValue(val ?? undefined);\n    },\n    [param.setValue]\n  );\n\n  const resolvedValue = useMemo(\n    () => param.value && resolveMentions(param.value, variables),\n    [param.value, variables]\n  );\n\n  return (\n    <ActionInputFormControl\n      bind={bind}\n      label={label}\n      isRequired={isRequired}\n      description={description}\n      error={shouldShowErrors ? param.error?.message : undefined}\n    >\n      <div className=\"rollout-rich-text-input\">\n        <RichEditor\n          value={resolvedValue ?? null}\n          setValue={setValue}\n          placeholder={placeholder}\n          formattingEnabled={false}\n          linksEnabled={false}\n          mentionVariables={variables}\n          isDisabled={disabled}\n          {...inputProps}\n        />\n      </div>\n    </ActionInputFormControl>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\n\nimport { ActionInputProps } from \"@rollouthq/connect-react/components/action-inputs\";\nimport { ActionInputFormControl } from \"@rollouthq/connect-react/components/action-inputs/helpers/action-input-form-control\";\nimport { useAppComponentRendererContext } from \"@rollouthq/connect-react/components/app-component-renderer/app-component-renderer-context\";\nimport { useAutomationInputParam } from \"@rollouthq/connect-react/components/app-component-renderer/use-automation-input-param\";\nimport {\n  FieldProps,\n  renderField,\n} from \"@rollouthq/connect-react/components/automation-form/helpers/render-field\";\nimport { useFormContext } from \"@rollouthq/connect-react/utils/form\";\nimport { createContext, MultiSelect, MultiSelectOption } from \"@rollouthq/ui\";\n\nexport type MultiSelectInputProps = ActionInputProps<string | undefined> & {\n  fetchOptions: () => Promise<MultiSelectOption[]> | MultiSelectOption[];\n  dependencies?: string[];\n};\n\nconst [MultiSelectInputContextProvider, useMultiSelectInputContext] =\n  createContext<MultiSelectInputProps>({\n    name: \"MultiSelectInput\",\n  });\n\nexport function MultiSelectInput(props: MultiSelectInputProps) {\n  const param = useAutomationInputParam(props.bind);\n  const paramName = param.path.join(\".\");\n  const { renderInputParams: renderParams } = useAppComponentRendererContext();\n\n  const field = renderField({\n    defaultField: MultiSelectInputField,\n    renderer: renderParams?.[paramName],\n    ctx: { InputParamField: MultiSelectInputField },\n  });\n\n  return (\n    <MultiSelectInputContextProvider value={props}>\n      {field}\n    </MultiSelectInputContextProvider>\n  );\n}\n\nfunction MultiSelectInputField(props: FieldProps) {\n  const ctx = useMultiSelectInputContext();\n  const { bind, dependencies, fetchOptions, placeholder } = ctx;\n  const param = useAutomationInputParam(bind);\n  const appComponentRendererCtx = useAppComponentRendererContext();\n  const { value, setValue } = param;\n  const label = ctx.label ?? param.label;\n  const description = ctx.description ?? param.description;\n\n  const disabled =\n    appComponentRendererCtx.disabled ||\n    props.disabled ||\n    !dependencies?.every(Boolean);\n\n  const [options, setOptions] = useState<MultiSelectOption[]>([]);\n  const [isLoadingOptions, setIsLoadingOptions] = useState(false);\n\n  const { shouldShowErrors } = useFormContext();\n\n  useEffect(() => {\n    async function getOptions() {\n      setIsLoadingOptions(true);\n      if (!disabled) {\n        const dropDownOptions = await fetchOptions();\n        setOptions(dropDownOptions);\n      }\n      setIsLoadingOptions(false);\n    }\n    getOptions();\n  }, [disabled]);\n\n  return (\n    <ActionInputFormControl\n      bind={bind}\n      label={label}\n      description={description}\n      error={shouldShowErrors ? param.error?.message : undefined}\n    >\n      <MultiSelect\n        label={label}\n        isDisabled={disabled}\n        items={options}\n        isLoading={isLoadingOptions}\n        inputPlaceholder={placeholder || \"Select option\"}\n        onSelectionChange={(items) => {\n          setValue(items.map((i) => i.id).join(\", \"));\n        }}\n        value={value}\n      />\n    </ActionInputFormControl>\n  );\n}\n","import React from \"react\";\n\nimport { ActionInputFormControl } from \"@rollouthq/connect-react/components/action-inputs/helpers/action-input-form-control\";\nimport { useAppComponentRendererContext } from \"@rollouthq/connect-react/components/app-component-renderer/app-component-renderer-context\";\nimport { useAutomationInputParam } from \"@rollouthq/connect-react/components/app-component-renderer/use-automation-input-param\";\nimport {\n  FieldProps,\n  renderField,\n} from \"@rollouthq/connect-react/components/automation-form/helpers/render-field\";\nimport { useFormContext } from \"@rollouthq/connect-react/utils/form\";\nimport { createContext } from \"@rollouthq/ui\";\n\nimport { ActionInputProps } from \"./types\";\n\nexport type BooleanInputProps = ActionInputProps<boolean | undefined>;\n\nconst [BooleanInputContextProvider, useBooleanInputContext] =\n  createContext<BooleanInputProps>({\n    name: \"BooleanInput\",\n  });\n\nexport function BooleanInput(props: BooleanInputProps) {\n  const param = useAutomationInputParam(props.bind);\n  const paramName = param.path.join(\".\");\n  const { renderInputParams: renderParams } = useAppComponentRendererContext();\n\n  const field = renderField({\n    defaultField: BooleanInputField,\n    renderer: renderParams?.[paramName],\n    ctx: { InputParamField: BooleanInputField },\n  });\n\n  return (\n    <BooleanInputContextProvider value={props}>\n      {field}\n    </BooleanInputContextProvider>\n  );\n}\n\nfunction BooleanInputField(props: FieldProps) {\n  const ctx = useBooleanInputContext();\n  const { bind } = ctx;\n  const param = useAutomationInputParam(bind);\n  const { shouldShowErrors } = useFormContext();\n  const appComponentRendererCtx = useAppComponentRendererContext();\n  const disabled = appComponentRendererCtx.disabled || props.disabled;\n  const { value, setValue, isOptional } = param;\n\n  const label = ctx.label ?? param.label;\n  const description = ctx.description ?? param.description;\n\n  return (\n    <ActionInputFormControl\n      bind={bind}\n      label={label}\n      isRequired={!isOptional}\n      description={description}\n      error={shouldShowErrors ? param.error?.message : undefined}\n    >\n      <input\n        type=\"checkbox\"\n        checked={value}\n        disabled={disabled}\n        onChange={(e) => setValue(e.target.checked)}\n      />\n    </ActionInputFormControl>\n  );\n}\n","import React from \"react\";\n\nexport const NoInputsComponent = () => <>No inputs</>;\n","import { PropsWithChildren, useMemo } from \"react\";\nimport React from \"react\";\n\nimport { createContext } from \"@rollouthq/ui\";\n\nexport type RolloutApiBaseUrlContext = {\n  apiBaseUrl: string;\n};\n\nconst [_RolloutApiBaseUrlContextProvider, useRolloutApiBaseUrlContext] =\n  createContext<RolloutApiBaseUrlContext>({\n    name: \"RolloutApiBaseUrlContext\",\n  });\n\nexport { useRolloutApiBaseUrlContext };\n\nexport function RolloutApiBaseUrlContextProvider(\n  props: PropsWithChildren<RolloutApiBaseUrlContext>\n) {\n  const { children, ...ctxProps } = props;\n  const ctx = useMemo(() => ctxProps, Object.values(ctxProps));\n\n  return (\n    <_RolloutApiBaseUrlContextProvider value={ctx}>\n      {children}\n    </_RolloutApiBaseUrlContextProvider>\n  );\n}\n","import { PropsWithChildren, useMemo } from \"react\";\nimport React from \"react\";\n\nimport { ThirdPartyAppKey as ThirdPartyAppSlug } from \"@rollouthq/api/apps/types\";\nimport { createContext } from \"@rollouthq/ui\";\n\nexport type AnyAppSlug = ThirdPartyAppSlug | \"customer\";\n\nexport type RolloutAllowedAppsContext = {\n  allowedApps: AnyAppSlug[] | undefined;\n};\n\nconst [_RolloutAllowedAppsContextProvider, useRolloutAllowedAppsContext] =\n  createContext<RolloutAllowedAppsContext>({\n    name: \"RolloutAllowedAppsContextProvider\",\n  });\n\nexport { useRolloutAllowedAppsContext };\n\nexport function RolloutAllowedAppsContextProvider(\n  props: PropsWithChildren<RolloutAllowedAppsContext>\n) {\n  const { children, ...ctxProps } = props;\n  const ctx = useMemo(() => ctxProps, Object.values(ctxProps));\n\n  return (\n    <_RolloutAllowedAppsContextProvider value={ctx}>\n      {children}\n    </_RolloutAllowedAppsContextProvider>\n  );\n}\n","import { useEffect } from \"react\";\n\nimport { useLazyQuery } from \"@rollouthq/api-client-react\";\nimport { PartialActionRef } from \"@rollouthq/connect-react/components/automation-form/types\";\n\nexport function useActionsQuery(action: PartialActionRef | undefined) {\n  const actions = useLazyQuery(\"apps.actions\");\n\n  useEffect(() => {\n    if (action?.appKey != null) {\n      actions.fetch({ appKey: action.appKey });\n    }\n  }, [action?.appKey]);\n\n  return actions;\n}\n","import { useQuery } from \"@rollouthq/api-client-react\";\n\nexport function useAppsQuery(opts: { allowedApps: string[] | undefined }) {\n  const { allowedApps } = opts;\n\n  return useQuery([\"apps.list\"], {\n    select:\n      allowedApps != null\n        ? (appsList) => appsList.filter((a) => allowedApps.includes(a.key))\n        : undefined,\n  });\n}\n","import assert from \"assert\";\n\nimport { useEffect } from \"react\";\n\nimport { useQuery } from \"@rollouthq/api-client-react/\";\nimport { useOAuth } from \"@rollouthq/connect-react/components/automation-form/use-oauth\";\n\nexport function useCredentialHandler(opts: {\n  appKey: string | undefined;\n  setCredentialId: (newCredentialId: string) => void;\n}) {\n  const { appKey, setCredentialId } = opts;\n\n  const { openOAuthPopup } = useOAuth({\n    onCredentialAdded: (newCredentialId) => {\n      setCredentialId(newCredentialId);\n      credentialsQuery.refetch();\n    },\n  });\n\n  const authInfoQuery = useQuery([\"apps.authInfo\", { appKey: appKey! }], {\n    enabled: appKey != null,\n  });\n\n  const authInfo = authInfoQuery.data;\n  const credentialsQuery = useQuery(\n    [\"apps.credentials\", { appKey: appKey!, authType: authInfo?.type }],\n    {\n      enabled: appKey != null && authInfo != null,\n    }\n  );\n\n  const credentials = credentialsQuery.data;\n  useEffect(() => {\n    if (authInfo == null || credentials == null) {\n      return;\n    }\n\n    if (\n      authInfo.type === \"none\" ||\n      (authInfo.type === \"apiKey\" && authInfo.singleCredentialOnly)\n    ) {\n      const hasCredentials = credentials.length > 0;\n      assert(hasCredentials, \"No credentials found!\");\n      return setCredentialId(credentials[0].id);\n    }\n\n    if (\n      (authInfo.type === \"oauth1\" || authInfo.type === \"oauth2\") &&\n      authInfo.singleCredentialOnly\n    ) {\n      if (credentials.length === 0) {\n        openOAuthPopup({ appKey: appKey! });\n      } else {\n        setCredentialId(credentials[0].id);\n      }\n    }\n  }, [authInfo, credentials]);\n}\n","import popup from \"popup-centered\";\nimport { useCallback, useEffect, useState } from \"react\";\n\nimport { useTRPCContext } from \"@rollouthq/api-client-react\";\n\nexport function useOAuth(opts: {\n  onCredentialAdded?: (credentialId: string) => void;\n}) {\n  const [oauthPopupError, setOauthPopupError] = useState<string | null>(null);\n  const [currentAppKey, setCurrentAppKey] = useState<string>();\n  const { client } = useTRPCContext();\n\n  useEffect(() => {\n    function handleNewOauthCredentialMessage(e: MessageEvent<any>) {\n      const evData = e.data._rollouthq;\n\n      if (evData?.ok) {\n        if (\n          evData?.type === \"credential-added\" &&\n          evData.appKey === currentAppKey &&\n          evData.credentialId != null\n        ) {\n          opts.onCredentialAdded?.(evData.credentialId);\n        }\n      } else {\n        if (evData?.error) {\n          setOauthPopupError(evData.error);\n        }\n      }\n    }\n\n    window.addEventListener(\"message\", handleNewOauthCredentialMessage, false);\n\n    return () => {\n      window.removeEventListener(\"message\", handleNewOauthCredentialMessage);\n    };\n  }, [currentAppKey]);\n\n  const openOAuthPopup = useCallback(\n    async (popupOpts: {\n      appKey: string;\n      customParams?: Record<string, any>;\n    }) => {\n      setCurrentAppKey(popupOpts.appKey);\n      setOauthPopupError(null);\n\n      try {\n        const { url } = await client.query(\"oauth.getURL\", {\n          appKey: popupOpts.appKey,\n          customParams: popupOpts.customParams,\n        });\n\n        popup(url, \"\", {\n          width: 800,\n          height: 800,\n        });\n      } catch (err) {\n        setOauthPopupError(\"Woops! Something went wrong linking account.\");\n      }\n    },\n    []\n  );\n\n  return {\n    oauthPopupError,\n    openOAuthPopup,\n  };\n}\n","import React, { useMemo } from \"react\";\n\nimport { AppIcon } from \"@rollouthq/connect-react/components/app-icon\";\nimport { FieldProps } from \"@rollouthq/connect-react/components/automation-form/helpers/render-field\";\nimport { useRolloutAppKeyContext } from \"@rollouthq/connect-react/contexts/end-user-context\";\nimport { findIssue } from \"@rollouthq/connect-react/utils/find-zod-issue\";\nimport { useFormContext } from \"@rollouthq/connect-react/utils/form\";\nimport { Center, ComboBox, ComboBoxItem, FormControl } from \"@rollouthq/ui\";\n\nimport { useAutomationFormContext } from \"./context\";\n\ntype ActionAppKeyInputProps = {\n  isDisabled?: boolean;\n};\n\nfunction ActionAppKeyInput(props: ActionAppKeyInputProps) {\n  const { appKey } = useRolloutAppKeyContext();\n  const { apps, data, setData, validation } = useAutomationFormContext();\n  const { action } = data;\n\n  const error = findIssue(validation, (b) => b.action);\n\n  const options = useMemo(\n    () => apps.data?.filter((a) => a.hasActions) ?? [],\n    [apps.data]\n  );\n  const selectedApp = apps.data?.find((a) => a.key === action?.appKey);\n\n  const { shouldShowErrors } = useFormContext();\n\n  return (\n    <div className=\"rollout-automation-form__action-app\">\n      {/* Preload app icons by rendering them in a hidden div */}\n      <div style={{ display: \"none\" }}>\n        {apps.data?.map((app) => (\n          <AppIcon key={app.key} appKey={app.key} />\n        ))}\n      </div>\n\n      <FormControl error={shouldShowErrors ? error?.message : undefined}>\n        <ComboBox<typeof options[number]>\n          aria-label=\"Action dropdown\"\n          defaultItems={options}\n          selectedOption={selectedApp}\n          isDisabled={props.isDisabled}\n          icon={\n            selectedApp == null ? undefined : (\n              <AppIcon appKey={selectedApp.key} />\n            )\n          }\n          inputPlaceholder=\"Select app\"\n          menuTrigger=\"focus\"\n          onSelectionChange={(newSelectedApp) => {\n            return setData((currentData) => {\n              if (newSelectedApp == null) {\n                return {\n                  ...currentData,\n                  action: undefined,\n                };\n              }\n\n              const isNewActionAppCustomers = newSelectedApp.key === appKey;\n              const isTriggerAppCustomers =\n                currentData.trigger?.appKey === appKey;\n\n              const bothAppsAreCustomers =\n                isNewActionAppCustomers && isTriggerAppCustomers;\n\n              const bothAppsAreThirdParty =\n                !isNewActionAppCustomers && !isTriggerAppCustomers;\n\n              // If both trigger and action are customer's app, unset action\n              const shouldUnsetTrigger =\n                bothAppsAreCustomers || bothAppsAreThirdParty;\n\n              return {\n                ...currentData,\n                action: {\n                  appKey: newSelectedApp.key,\n                  inputParams: {},\n                },\n                trigger: shouldUnsetTrigger ? undefined : currentData.trigger,\n              };\n            });\n          }}\n        >\n          {(app) => (\n            <ComboBoxItem key={app._comboboxKey} textValue={app.name}>\n              <Center className=\"rollout-listbox__option-icon\">\n                <AppIcon appKey={app.key} />\n              </Center>\n              {app.name}\n            </ComboBoxItem>\n          )}\n        </ComboBox>\n      </FormControl>\n    </div>\n  );\n}\n\nexport function ActionAppKeyField(props: FieldProps) {\n  return <ActionAppKeyInput isDisabled={props.disabled} />;\n}\n","import React from \"react\";\n\nimport { useRolloutApiBaseUrlContext } from \"@rollouthq/connect-react/contexts/api-base-url-context\";\nimport { CSS, st } from \"@rollouthq/ui\";\n\nexport type AppIconProps = {\n  appKey: string;\n  css?: CSS;\n};\n\nexport function AppIcon(props: AppIconProps) {\n  const { apiBaseUrl } = useRolloutApiBaseUrlContext();\n\n  const { appKey, css } = props;\n  const src = `${apiBaseUrl}/connect-react/${appKey}/icon`;\n\n  return <st.img key={appKey} src={src} css={{ width: \"1em\", ...css }} />;\n}\n","import React, { ReactNode, useMemo } from \"react\";\n\nimport { useQuery } from \"@rollouthq/api-client-react\";\nimport { createContext } from \"@rollouthq/ui/\";\n\nconst [_RolloutAppKeyProvider, useRolloutAppKeyContext] = createContext<{\n  appKey: string;\n}>({\n  name: \"RolloutEndUserProvider\",\n});\n\nexport { useRolloutAppKeyContext };\n\nexport function RolloutAppKeyProvider(props: { children: ReactNode }) {\n  const endUserQuery = useQuery([\"end-users.getInfo\"]);\n  const appKey = endUserQuery.data?.appKey;\n\n  if (appKey == null) {\n    return null;\n  }\n\n  return (\n    <RolloutAppKeyProviderInner appKey={appKey}>\n      {props.children}\n    </RolloutAppKeyProviderInner>\n  );\n}\n\nfunction RolloutAppKeyProviderInner(props: {\n  children: ReactNode;\n  appKey: string;\n}) {\n  const { appKey } = props;\n\n  const context = useMemo(() => ({ appKey }), [appKey]);\n\n  return (\n    <_RolloutAppKeyProvider value={context}>\n      {props.children}\n    </_RolloutAppKeyProvider>\n  );\n}\n","import { createProxy, getPath, ObjPathProxy } from \"ts-object-path\";\nimport { SafeParseReturnType } from \"zod\";\n\nexport function findIssue<Input, Output>(\n  validation: SafeParseReturnType<Input, Output>,\n  pathGetter: (b: ObjPathProxy<Input, Input>) => any\n) {\n  if (validation.success) {\n    return undefined;\n  }\n  const proxy = createProxy<Input>();\n  const path = getPath(pathGetter(proxy));\n\n  return validation.error.issues.find((err) => {\n    return err.path.join(\".\") === path.join(\".\");\n  });\n}\n","import { z } from \"zod\";\n\nimport { InferQueryOutput, UseQueryResult } from \"@rollouthq/api-client-react\";\nimport { Variable } from \"@rollouthq/common\";\nimport { createContext } from \"@rollouthq/ui\";\n\nimport { RenderFields } from \"./helpers/render-field\";\nimport {\n  AutomationFormData,\n  AutomationFormDataInput,\n  PartialAutomationFormData,\n} from \"./types\";\n\nexport type AutomationFormContext = {\n  data: PartialAutomationFormData;\n  setData: (\n    updater: (\n      currentData: PartialAutomationFormData\n    ) => PartialAutomationFormData\n  ) => void;\n  validation: z.SafeParseReturnType<\n    AutomationFormData,\n    AutomationFormDataInput\n  >;\n  apps: UseQueryResult<InferQueryOutput<\"apps.list\">>;\n  actions: UseQueryResult<InferQueryOutput<\"apps.actions\">>;\n  variables: readonly Variable[];\n  renderFields: RenderFields | undefined;\n};\n\nexport const [AutomationFormContextProvider, useAutomationFormContext] =\n  createContext<AutomationFormContext>({\n    name: \"AutomationForm\",\n  });\n","import React, { useCallback } from \"react\";\nimport { ZodIssue } from \"zod\";\n\nimport { useQuery } from \"@rollouthq/api-client-react/\";\nimport { AnyAuthCredentialInput } from \"@rollouthq/connect-react/components/credential-input\";\n\nimport { useAutomationFormContext } from \"./context\";\nimport { FieldProps } from \"./helpers/render-field\";\n\nexport type ActionCredentialIdInput = {\n  appKey: string;\n  credentialId: string | undefined;\n  setCredentialId: (newCredentialId: string | undefined) => void;\n  error: ZodIssue | undefined;\n  isDisabled?: boolean;\n};\n\nexport function ActionCredentialIdInput(props: ActionCredentialIdInput) {\n  const { appKey, credentialId, setCredentialId, error, isDisabled } = props;\n\n  const authInfoQuery = useQuery([\"apps.authInfo\", { appKey }]);\n\n  if (authInfoQuery.data == null) {\n    return null;\n  }\n\n  return (\n    <AnyAuthCredentialInput\n      appKey={appKey}\n      authInfoQuery={authInfoQuery}\n      credentialId={credentialId}\n      setCredentialId={setCredentialId}\n      error={error}\n      isDisabled={isDisabled}\n    />\n  );\n}\n\nexport function ActionCredentialIdField(props: FieldProps) {\n  const { data, setData, validation } = useAutomationFormContext();\n\n  const { action } = data;\n\n  const setCredentialId = useCallback(\n    (newCredentialId: string | undefined) =>\n      setData((currentData) => ({\n        ...currentData,\n        action: {\n          ...currentData.action!,\n          credentialId: newCredentialId,\n        },\n      })),\n    []\n  );\n\n  if (action?.actionKey == null) {\n    return null;\n  }\n\n  return (\n    <ActionCredentialIdInput\n      appKey={action.appKey}\n      credentialId={action.credentialId}\n      setCredentialId={setCredentialId}\n      error={\n        validation.success\n          ? undefined\n          : validation.error.issues.find(\n              (issue) => issue.path.join(\".\") === \"action.credentialId\"\n            )\n      }\n      isDisabled={props.disabled}\n    />\n  );\n}\n","import assert from \"assert\";\n\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { ZodIssue } from \"zod\";\n\nimport {\n  InferQueryOutput,\n  useMutation,\n  useQuery,\n  UseQueryResult,\n} from \"@rollouthq/api-client-react\";\nimport { CredentialDetails } from \"@rollouthq/connect-react/components/automation-form/helpers/credential-details\";\nimport { useOAuth } from \"@rollouthq/connect-react/components/automation-form/use-oauth\";\nimport { useFormContext } from \"@rollouthq/connect-react/utils/form\";\nimport {\n  Avatar,\n  Center,\n  ComboBox,\n  ComboBoxItem,\n  dataAttr,\n  FormControl,\n  GoogleSignIn,\n  GreenPlus,\n  Person,\n  Plus,\n} from \"@rollouthq/ui\";\n\nconst ADD_NEW_CREDENTIAL_OPTION = {\n  id: \"ADD_OPTION\",\n  label: \"Add new account\",\n  avatar: undefined,\n  icon: <Plus />,\n} as const;\n\nexport type CredentialInputProps = {\n  appKey: string;\n  authInfoQuery: UseQueryResult<InferQueryOutput<\"apps.authInfo\">>;\n  setCredentialId: (newCredentialId: string | undefined) => void;\n  credentialId: string | undefined;\n  error: ZodIssue | undefined;\n  isDisabled?: boolean;\n};\n\nexport function CredentialInput(props: CredentialInputProps) {\n  const {\n    isDisabled,\n    appKey,\n    setCredentialId,\n    credentialId,\n    authInfoQuery,\n    error,\n  } = props;\n\n  const { shouldShowErrors } = useFormContext();\n  const [oauthError, setOauthError] = useState(false);\n  const [savingApiToken, setSavingApiToken] = useState(false);\n  const apiTokenQuery = useMutation(\"credentials.add-api-token\");\n  const credentials = useQuery([\"apps.credentials\", { appKey }]);\n  const firstApiTokenInput = useRef<HTMLInputElement | null>(null);\n  const credentialInputRef = useRef<HTMLInputElement | null>(null);\n  const [displayCredentialDetails, setDisplayCredentialDetails] =\n    useState(false);\n\n  const { openOAuthPopup, oauthPopupError } = useOAuth({\n    onCredentialAdded: (newCredentialId) => {\n      setCredentialId(newCredentialId);\n      credentials.refetch();\n    },\n  });\n\n  // setAuthError on popupError\n  useEffect(() => {\n    setOauthError(oauthPopupError != null);\n  }, [oauthPopupError]);\n\n  const credentialsList = useMemo(\n    () => [...(credentials.data ?? []), ADD_NEW_CREDENTIAL_OPTION],\n    [credentials.data]\n  );\n\n  const selectedCredential = credentialsList.find(\n    (cred) => cred.id === credentialId\n  );\n\n  const icon = displayCredentialDetails ? (\n    <GreenPlus />\n  ) : selectedCredential && selectedCredential.avatar != null ? (\n    <Avatar\n      src={selectedCredential.avatar}\n      name={selectedCredential.label}\n      alt={selectedCredential.label}\n    />\n  ) : (\n    <Person />\n  );\n\n  function saveApiToken(apiToken: Record<string, string>) {\n    if (apiToken != null) {\n      setSavingApiToken(true);\n      apiTokenQuery.mutate(\n        {\n          appKey,\n          credential: apiToken,\n        },\n        {\n          onSuccess: (t) => {\n            setDisplayCredentialDetails(false);\n            credentials.refetch();\n            credentialInputRef.current?.blur();\n            setCredentialId(t);\n            setSavingApiToken(false);\n          },\n          onError: () => setSavingApiToken(false),\n        }\n      );\n    }\n  }\n\n  const options = credentialsList;\n  const selectedOption = options.find((opt) => opt.id === credentialId);\n\n  return (\n    <div\n      className=\"rollout-automation-form__credentials\"\n      data-avatar\n      data-selected={dataAttr(selectedCredential?.avatar != null)}\n    >\n      <FormControl error={shouldShowErrors ? error?.message : undefined}>\n        <ComboBox<typeof options[number]>\n          aria-label=\"Account dropdown\"\n          customRef={credentialInputRef}\n          defaultItems={options}\n          selectedOption={selectedOption}\n          menuTrigger=\"focus\"\n          icon={icon}\n          isDisabled={isDisabled}\n          isLoading={credentials.isFetching || authInfoQuery.isFetching}\n          inputPlaceholder={\n            displayCredentialDetails ? \"Connect new account\" : \"Select account\"\n          }\n          onSelectionChange={(newCred) => {\n            if (newCred == null) {\n              return setCredentialId(undefined);\n            }\n\n            const appAuthInfo = authInfoQuery.data;\n            const addNewAccount = newCred === ADD_NEW_CREDENTIAL_OPTION;\n\n            assert(appAuthInfo != null, \"No app auth info\");\n\n            if (addNewAccount) {\n              if (\n                appAuthInfo.type === \"oauth1\" ||\n                appAuthInfo.type === \"oauth2\"\n              ) {\n                if (appAuthInfo.customParams != null) {\n                  setDisplayCredentialDetails(true);\n                  setTimeout(() => firstApiTokenInput.current?.focus());\n                } else {\n                  openOAuthPopup({ appKey });\n                }\n              }\n\n              if (appAuthInfo.type === \"apiKey\") {\n                setDisplayCredentialDetails(true);\n                setTimeout(() => firstApiTokenInput.current?.focus());\n              }\n\n              setOauthError(false);\n              return;\n            }\n\n            setOauthError(false);\n            setDisplayCredentialDetails(false);\n            setCredentialId(newCred.id);\n          }}\n        >\n          {(item) => {\n            const isGoogleApp =\n              appKey === \"gmail\" ||\n              appKey === \"googleCalendar\" ||\n              appKey === \"googleDocs\" ||\n              appKey === \"googleSheets\";\n\n            if (isGoogleApp && item.id === \"ADD_OPTION\") {\n              return (\n                <ComboBoxItem key={item._comboboxKey} textValue={item.label}>\n                  <GoogleSignIn />\n                </ComboBoxItem>\n              );\n            } else {\n              return (\n                <ComboBoxItem key={item._comboboxKey} textValue={item.label}>\n                  <Center className=\"rollout-listbox__option-icon\">\n                    <Avatar\n                      aria-label=\"Option icon\"\n                      src={item.avatar}\n                      name={\"icon\" in item ? null : item.label}\n                      alt={item.label}\n                      icon={\"icon\" in item ? item.icon : undefined}\n                    />\n                  </Center>\n                  {item.label}\n                </ComboBoxItem>\n              );\n            }\n          }}\n        </ComboBox>\n      </FormControl>\n\n      {oauthError && (\n        <div className=\"rollout-automation-form-oauth__error__message\">\n          {oauthPopupError ?? \"Oops! Couldn't link that account.\"}\n        </div>\n      )}\n\n      {displayCredentialDetails && authInfoQuery.data != null && (\n        <CredentialDetails\n          appKey={appKey}\n          authType={authInfoQuery.data}\n          saveApiToken={saveApiToken}\n          savingApiToken={savingApiToken}\n          credentialId={credentialId}\n          firstApiTokenInput={firstApiTokenInput}\n          openOAuthPopup={openOAuthPopup}\n          closeModal={() => setDisplayCredentialDetails(false)}\n        />\n      )}\n    </div>\n  );\n}\n\nexport type AnyAuthCredentialInputProps = {\n  appKey: string;\n  authInfoQuery: UseQueryResult<InferQueryOutput<\"apps.authInfo\">>;\n  setCredentialId: (newCredentialId: string | undefined) => void;\n  credentialId: string | undefined;\n  error: ZodIssue | undefined;\n  isDisabled?: boolean;\n};\n\nexport function AnyAuthCredentialInput(props: AnyAuthCredentialInputProps) {\n  const {\n    appKey,\n    authInfoQuery,\n    credentialId,\n    error,\n    setCredentialId,\n    isDisabled,\n  } = props;\n\n  const authInfo = authInfoQuery.data;\n\n  if (authInfo == null) {\n    return null;\n  }\n\n  if (\n    (authInfo.type === \"oauth1\" ||\n      authInfo.type === \"oauth2\" ||\n      authInfo.type === \"apiKey\") &&\n    authInfo.singleCredentialOnly\n  ) {\n    return null;\n  }\n\n  if (authInfo.type === \"none\") {\n    return null;\n  }\n\n  return (\n    <CredentialInput\n      appKey={appKey}\n      authInfoQuery={authInfoQuery}\n      credentialId={credentialId}\n      setCredentialId={setCredentialId}\n      error={error}\n      isDisabled={isDisabled}\n    />\n  );\n}\n","import React, { useEffect, useState } from \"react\";\n\nimport { InferQueryOutput, useMutation } from \"@rollouthq/api-client-react\";\nimport { Spinner } from \"@rollouthq/ui\";\n\nimport { TokenInput } from \"./token-input\";\n\ntype CredentialDetailsProps = {\n  appKey: string;\n  authType: InferQueryOutput<\"apps.authInfo\">;\n  saveApiToken: (apiToken: Record<string, string>) => void;\n  credentialId: string | undefined;\n  firstApiTokenInput: React.MutableRefObject<HTMLInputElement | null> | null;\n  openOAuthPopup: (opts: {\n    appKey: string;\n    customParams?: Record<string, any>;\n  }) => Promise<void>;\n  closeModal: () => void;\n  savingApiToken: boolean;\n};\n\nexport function CredentialDetails(props: CredentialDetailsProps) {\n  const {\n    appKey,\n    saveApiToken,\n    authType,\n    firstApiTokenInput,\n    openOAuthPopup,\n    closeModal,\n    savingApiToken,\n  } = props;\n\n  const [inputValues, setInputValues] = useState<Record<string, string>>({});\n\n  const [apiTokenConnectionTested, setApiTokenConnectionTested] =\n    useState(false);\n\n  const [apiTokenConnectionValid, setApiTokenConnectionValid] = useState(false);\n  const [testingConnection, setTestingConnection] = useState(false);\n\n  const apiTokenConnectionQuery = useMutation(\"credentials.test-connection\");\n  const apiTokenFormIsValid = validateApiTokenForm();\n\n  // When api token is reset\n  useEffect(() => {\n    if (apiTokenConnectionTested) {\n      setApiTokenConnectionTested(false);\n      setApiTokenConnectionValid(false);\n    }\n  }, [inputValues]);\n\n  function validateApiTokenForm() {\n    if (\"customParams\" in authType && authType.customParams != null) {\n      return authType.customParams.every((i) => inputValues?.[i.key] != null);\n    }\n\n    return true;\n  }\n\n  function testApiTokenConnection() {\n    setTestingConnection(true);\n    apiTokenConnectionQuery.mutate(\n      { appKey: appKey, apiToken: inputValues },\n      {\n        onSuccess: (valid) => {\n          setApiTokenConnectionTested(true);\n          setApiTokenConnectionValid(valid);\n          setTestingConnection(false);\n        },\n      }\n    );\n  }\n\n  function renderInputs() {\n    if (authType == null) {\n      return null;\n    }\n    if (\"customParams\" in authType) {\n      return authType.customParams?.map((input, inputIdx) => (\n        <TokenInput\n          key={inputIdx}\n          ref={inputIdx === 0 ? firstApiTokenInput : undefined}\n          definition={input}\n          value={inputValues?.[input.key] ?? \"\"}\n          onChange={(newValue) =>\n            setInputValues({ ...inputValues, [input.key]: newValue })\n          }\n          isTestingConnection={testingConnection}\n        />\n      ));\n    }\n  }\n\n  const openOAuth = () => {\n    openOAuthPopup({\n      appKey,\n      customParams: inputValues,\n    });\n    setTestingConnection(false);\n    closeModal();\n  };\n\n  const testOrSaveToken = () => {\n    if (apiTokenConnectionValid && inputValues != null) {\n      saveApiToken(inputValues);\n    } else {\n      testApiTokenConnection();\n    }\n  };\n\n  return (\n    <div className=\"rollout-automation-form__api-token-input-container\">\n      {renderInputs()}\n\n      {authType?.type === \"apiKey\" ? (\n        <div className=\"rollout-automation-form__api-token-apitoken-button-container\">\n          <button\n            type=\"button\"\n            aria-label=\"Save button\"\n            disabled={\n              !apiTokenFormIsValid || testingConnection || savingApiToken\n            }\n            className={`rollout-button--primary ${\n              testingConnection\n                ? \"rollout-automation-form__api-token-test-button\"\n                : \"rollout-automation-form__api-token-save-button\"\n            }`}\n            onClick={testOrSaveToken}\n          >\n            {(testingConnection || savingApiToken) && <Spinner />}\n            {apiTokenConnectionTested && apiTokenConnectionValid\n              ? \"Save\"\n              : testingConnection\n              ? \"Testing Connection ...\"\n              : \"Test Connection\"}\n          </button>\n\n          {apiTokenConnectionTested && (\n            <span className=\"rollout-automation-form__api-token-connection-result\">\n              {apiTokenConnectionValid\n                ? \"✅ Connection Success\"\n                : \"⚠️ Woops! Check your credentials\"}\n            </span>\n          )}\n        </div>\n      ) : (\n        <button\n          type=\"button\"\n          aria-label=\"Save button\"\n          disabled={!apiTokenFormIsValid || testingConnection || savingApiToken}\n          className=\"rollout-button--primary\"\n          onClick={openOAuth}\n        >\n          Add account\n        </button>\n      )}\n    </div>\n  );\n}\n","import React, { forwardRef } from \"react\";\n\nimport { AuthCustomParamInputDefinition } from \"@rollouthq/api/engine/define-auth\";\nimport { TextField } from \"@rollouthq/ui\";\n\ntype TokenInputProps = {\n  definition: AuthCustomParamInputDefinition;\n  isTestingConnection: boolean;\n  value: string;\n  onChange: (newValue: string) => void;\n};\n\nexport const TokenInput = forwardRef<HTMLInputElement, TokenInputProps>(\n  (props, ref) => {\n    const { isTestingConnection, value, onChange } = props;\n    const { infoHTML, label, placeholder } = props.definition;\n\n    return (\n      <div>\n        <label className=\"rollout-automation-form__api-token-input-label\">\n          {label}\n        </label>\n\n        {infoHTML != null && (\n          <div\n            dangerouslySetInnerHTML={{ __html: infoHTML }}\n            className=\"rollout-automation-form__api-token-input-info\"\n          />\n        )}\n\n        <div>\n          <TextField\n            ref={ref}\n            className=\"rollout-automation-form__api-token-input\"\n            aria-label=\"Token input text field\"\n            isDisabled={isTestingConnection}\n            placeholder={placeholder}\n            value={value}\n            onChange={onChange}\n          />\n        </div>\n      </div>\n    );\n  }\n);\n","import React from \"react\";\n\nimport { AppIcon } from \"@rollouthq/connect-react/components/app-icon\";\nimport { FieldProps } from \"@rollouthq/connect-react/components/automation-form/helpers/render-field\";\nimport { useFormContext } from \"@rollouthq/connect-react/utils/form\";\nimport { Center, ComboBox, ComboBoxItem, FormControl } from \"@rollouthq/ui\";\n\nimport { useAutomationFormContext } from \"./context\";\n\nexport function ActionKeySelectInput(props: { isDisabled?: boolean }) {\n  const { data, setData, actions, validation } = useAutomationFormContext();\n  const { shouldShowErrors, setShouldShowErrors } = useFormContext();\n\n  const getValidationIssues = () => {\n    if (validation.success) {\n      return null;\n    }\n    return validation.error.issues.find(\n      (issue) => issue.path.join(\".\") === \"action.actionKey\"\n    );\n  };\n  const error = getValidationIssues();\n  const icon =\n    data.action != null ? <AppIcon appKey={data.action.appKey} /> : undefined;\n\n  const options = actions.data ?? [];\n  const selectedAction = actions.data?.find(\n    (a) => a.key === data.action?.actionKey\n  );\n\n  return (\n    <div className=\"rollout-automation-form__action-action\">\n      <FormControl error={shouldShowErrors ? error?.message : undefined}>\n        <ComboBox<typeof options[number]>\n          aria-label=\"Action dropdown\"\n          defaultItems={options}\n          selectedOption={selectedAction}\n          isDisabled={props.isDisabled}\n          icon={icon}\n          isLoading={actions.isLoading}\n          inputPlaceholder=\"Select action\"\n          menuTrigger=\"focus\"\n          onSelectionChange={(newSelectedAction) => {\n            setShouldShowErrors(false);\n\n            return setData((currentData) => ({\n              ...currentData,\n              action: {\n                ...currentData.action!,\n                actionKey: newSelectedAction?.key,\n                inputParams: {},\n              },\n            }));\n          }}\n        >\n          {(item) => (\n            <ComboBoxItem key={item._comboboxKey} textValue={item.name}>\n              <Center className=\"rollout-listbox__option-icon\">{icon}</Center>\n              {item.name}\n            </ComboBoxItem>\n          )}\n        </ComboBox>\n      </FormControl>\n    </div>\n  );\n}\n\nexport function ActionKeyField(props: FieldProps) {\n  return <ActionKeySelectInput isDisabled={props.disabled} />;\n}\n","import assert from \"assert\";\n\nimport React from \"react\";\n\nimport { ActionAppKeyField } from \"./action-app-key-input\";\nimport { ActionCredentialIdField } from \"./action-credential-id-input\";\nimport { ActionKeyField } from \"./action-key-select-input\";\nimport { AutomationFormActionInputs } from \"./automation-form-action-inputs\";\nimport { useAutomationFormContext } from \"./context\";\nimport { renderField } from \"./helpers/render-field\";\n\nexport function AutomationFormAction() {\n  const { data, renderFields } = useAutomationFormContext();\n  const { action } = data;\n\n  assert(\n    typeof renderFields?.action !== \"function\" &&\n      typeof renderFields?.action !== \"boolean\"\n  );\n\n  const actionAppKeyField = renderField({\n    defaultField: ActionAppKeyField,\n    renderer: renderFields?.action?.appKey,\n    ctx: { ActionAppKeyField },\n  });\n\n  const actionKeyField = renderField({\n    defaultField: ActionKeyField,\n    renderer: renderFields?.action?.actionKey,\n    ctx: { ActionKeyField },\n  });\n\n  const credentialIdField = renderField({\n    defaultField: ActionCredentialIdField,\n    renderer: renderFields?.action?.credentialId,\n    ctx: { ActionCredentialIdField },\n  });\n\n  return (\n    <>\n      <div className=\"rollout-automation-form__action\">\n        <div className=\"rollout-automation-form__label\">Select action</div>\n\n        <div className=\"rollout-automation-form__helper-text\">\n          This is what your automation will do when triggered\n        </div>\n\n        {actionAppKeyField}\n        {actionKeyField}\n        {credentialIdField}\n      </div>\n\n      {action?.actionKey != null && action.credentialId != null && (\n        <AutomationFormActionInputs />\n      )}\n    </>\n  );\n}\n","import assert from \"assert\";\n\nimport React, { useCallback } from \"react\";\n\nimport { useTRPCContext } from \"@rollouthq/api-client-react\";\nimport { AppComponentRenderer } from \"@rollouthq/connect-react/components/app-component-renderer\";\nimport { useAutomationFormContext } from \"@rollouthq/connect-react/components/automation-form\";\nimport { useActionRendererData } from \"@rollouthq/connect-react/components/automation-form/get-action-renderer-data\";\n\nexport function AutomationFormActionInputs() {\n  return (\n    <div className=\"rollout-automation-form__action-inputs\">\n      <div>\n        <div className=\"rollout-automation-form__label\">Set up action</div>\n        <ActionInputFields />\n      </div>\n    </div>\n  );\n}\n\nexport function ActionInputFields() {\n  const { client } = useTRPCContext();\n  const { data, setData, variables, renderFields } = useAutomationFormContext();\n  const action = data.action!;\n  const actionRendererData = useActionRendererData({ actionRef: data.action });\n\n  const setInputParams = useCallback(\n    (newParams: Record<string, any>) => {\n      setData((currentData) => ({\n        ...currentData,\n        action: {\n          ...currentData.action!,\n          inputParams: newParams,\n        },\n      }));\n    },\n    [setData]\n  );\n\n  if (actionRendererData == null || action.credentialId == null) {\n    return null;\n  }\n\n  assert(\n    typeof renderFields?.action !== \"function\" &&\n      typeof renderFields?.action !== \"boolean\"\n  );\n\n  return (\n    <div className=\"rollout-automation-form__action-inputs-wrapper\">\n      <AppComponentRenderer\n        api={client}\n        credentialId={action.credentialId!}\n        inputParams={action.inputParams}\n        setInputParams={setInputParams}\n        renderInputParams={renderFields?.action?.inputParams}\n        importedData={actionRendererData}\n        variables={variables}\n        getDynamicOptions={() => {\n          throw new Error(\"Dynamic options not implemented in actions\");\n        }}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\nimport { createProxy } from \"ts-object-path\";\nimport { AnyZodObject, z } from \"zod\";\n\nimport { useQuery } from \"@rollouthq/api-client-react\";\nimport * as inputComponents from \"@rollouthq/connect-react/components/action-inputs\";\n\nimport {\n  AppComponentRendererContext,\n  AppComponentRendererContextProvider,\n} from \"./app-component-renderer-context\";\nimport { InputDefRenderer } from \"./input-def-renderer\";\n\nconst b = createProxy<z.infer<AnyZodObject>>();\n\nexport type ActionRendererProps = AppComponentRendererContext;\n\nexport function AppComponentRenderer(props: ActionRendererProps) {\n  const {\n    api,\n    credentialId,\n    inputParams,\n    setInputParams,\n    importedData,\n    variables,\n    getDynamicOptions,\n  } = props;\n\n  return (\n    <AppComponentRendererContextProvider value={props}>\n      {\"Component\" in importedData ? (\n        <importedData.Component\n          b={b}\n          credentialId={credentialId}\n          inputParams={inputParams}\n          setInputParams={setInputParams}\n          api={api}\n          useQuery={useQuery}\n          inputComponents={inputComponents}\n        />\n      ) : (\n        <>\n          {importedData.inputParamDefs.map((def) => (\n            <InputDefRenderer\n              key={def.key}\n              def={def}\n              value={inputParams[def.key]}\n              setValue={(newValue) =>\n                setInputParams({\n                  ...inputParams,\n                  [def.key]: newValue,\n                })\n              }\n              variables={variables}\n              getDynamicOptions={getDynamicOptions}\n            />\n          ))}\n        </>\n      )}\n    </AppComponentRendererContextProvider>\n  );\n}\n","import React from \"react\";\nimport { unreachableCase } from \"ts-assert-unreachable\";\n\nimport type { CustomerTriggerDropdownInputOption } from \"@rollouthq/api/engine/customers/get-customer-trigger-dropdown-options\";\nimport type { InputDefOutput } from \"@rollouthq/api/engine/inputs/inputs-configuration\";\nimport { Variable } from \"@rollouthq/common\";\nimport { useAppComponentRendererContext } from \"@rollouthq/connect-react/components/app-component-renderer/app-component-renderer-context\";\nimport { PlainTextInputDefRenderer } from \"@rollouthq/connect-react/components/app-component-renderer/plain-text-input-def-renderer\";\nimport { RichTextInputDefRenderer } from \"@rollouthq/connect-react/components/app-component-renderer/rich-text-input-def-renderer\";\nimport {\n  FieldProps,\n  renderField,\n} from \"@rollouthq/connect-react/components/automation-form/helpers/render-field\";\nimport { StyledInputFormControl } from \"@rollouthq/connect-react/components/styled-input-form-control\";\nimport { createContext } from \"@rollouthq/ui/\";\n\nimport { DropdownInputDefRenderer } from \"./dropdown-input-def-renderer\";\n\nexport type InputDefRendererProps = {\n  def: InputDefOutput;\n  value: any;\n  setValue: (newValue: any) => void;\n  variables: readonly Variable[];\n  getDynamicOptions: (opts: {\n    inputKey: string;\n  }) => Promise<CustomerTriggerDropdownInputOption[]>;\n};\n\nconst [InputDefRendererContextProvider, useInputDefRendererContext] =\n  createContext<InputDefRendererProps>({\n    name: \"InputDefRenderer\",\n  });\n\nexport function InputDefRenderer(props: InputDefRendererProps) {\n  const { renderInputParams: renderParams } = useAppComponentRendererContext();\n\n  const field = renderField({\n    defaultField: InputDefRendererField,\n    renderer: renderParams?.[props.def.key],\n    ctx: { InputParamField: InputDefRendererField },\n  });\n\n  return (\n    <InputDefRendererContextProvider value={props}>\n      {field}\n    </InputDefRendererContextProvider>\n  );\n}\n\nexport function InputDefRendererField(props: FieldProps) {\n  const ctx = useInputDefRendererContext();\n  const { def, value, setValue, variables, getDynamicOptions } = ctx;\n\n  function renderInput() {\n    if (def.type === \"plainText\") {\n      return (\n        <PlainTextInputDefRenderer\n          def={def}\n          value={value}\n          setValue={setValue}\n          isDisabled={props.disabled}\n        />\n      );\n    }\n\n    if (def.type === \"dropdown\") {\n      return (\n        <DropdownInputDefRenderer\n          def={def}\n          value={value}\n          setValue={setValue}\n          getDynamicOptions={getDynamicOptions}\n          isDisabled={props.disabled}\n        />\n      );\n    }\n\n    if (def.type === \"string\") {\n      return (\n        <RichTextInputDefRenderer\n          def={def}\n          value={value}\n          setValue={setValue}\n          variables={variables}\n          isDisabled={props.disabled}\n        />\n      );\n    }\n\n    unreachableCase(def);\n  }\n\n  return (\n    <StyledInputFormControl label={def.label} isRequired error={undefined}>\n      {renderInput()}\n    </StyledInputFormControl>\n  );\n}\n","import React from \"react\";\n\nimport type { PlainTextInputDef } from \"@rollouthq/api/engine/inputs/inputs-configuration\";\nimport { TextField } from \"@rollouthq/ui/\";\n\nexport type PlainTextInputDefRendererProps = {\n  def: PlainTextInputDef;\n  value: string | undefined;\n  setValue: (newValue: string | undefined) => void;\n  isDisabled: boolean | undefined;\n};\n\nexport function PlainTextInputDefRenderer(\n  props: PlainTextInputDefRendererProps\n) {\n  return (\n    <TextField\n      className=\"rollout-input\"\n      value={props.value ?? \"\"}\n      onChange={props.setValue}\n      isDisabled={props.isDisabled}\n    />\n  );\n}\n","import React from \"react\";\n\nimport type { RichTextInputDef } from \"@rollouthq/api/engine/inputs/inputs-configuration\";\nimport {\n  resolveMentions,\n  RichEditorContent,\n  Variable,\n} from \"@rollouthq/common\";\nimport { RichEditor } from \"@rollouthq/ui\";\n\nexport type RichTextInputDefRendererProps = {\n  def: RichTextInputDef;\n  value: RichEditorContent | undefined;\n  setValue: (newValue: RichEditorContent | undefined) => void;\n  variables: readonly Variable[];\n  isDisabled: boolean | undefined;\n};\n\nexport function RichTextInputDefRenderer(props: RichTextInputDefRendererProps) {\n  const resolvedValue =\n    props.value && resolveMentions(props.value, props.variables);\n\n  return (\n    <div className=\"rollout-rich-text-input\">\n      <RichEditor\n        value={resolvedValue ?? null}\n        setValue={(newValue) => props.setValue(newValue ?? undefined)}\n        formattingEnabled={false}\n        linksEnabled={false}\n        mentionVariables={props.variables}\n        isDisabled={props.isDisabled}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport type { CustomerTriggerDropdownInputOption } from \"@rollouthq/api/engine/customers/get-customer-trigger-dropdown-options\";\nimport type { DropdownInputDefOutput } from \"@rollouthq/api/engine/inputs/inputs-configuration\";\nimport { ComboBox, ComboBoxItem, useAsyncMemo } from \"@rollouthq/ui\";\n\nexport type DropdownInputDefRendererProps = {\n  def: DropdownInputDefOutput;\n  value: string | undefined;\n  setValue: (newValue: string | undefined) => void;\n  isDisabled: boolean | undefined;\n  getDynamicOptions: (opts: {\n    inputKey: string;\n  }) => Promise<CustomerTriggerDropdownInputOption[]>;\n};\n\nexport function DropdownInputDefRenderer(props: DropdownInputDefRendererProps) {\n  const { def, value, setValue, getDynamicOptions } = props;\n\n  const dropdownOptionsAsync = useAsyncMemo(async () => {\n    if (def.dropdownConfiguration?.type === \"static\") {\n      return def.dropdownConfiguration.staticOptions.map((opt) => ({\n        key: opt,\n        label: opt,\n      }));\n    } else {\n      return await getDynamicOptions({ inputKey: def.key });\n    }\n  }, [JSON.stringify(def.dropdownConfiguration)]);\n\n  const dropdownOptions = dropdownOptionsAsync.value ?? [];\n  const selectedOption = dropdownOptions.find((e) => e.key === value);\n\n  return (\n    <ComboBox<typeof dropdownOptions[number]>\n      defaultItems={dropdownOptions}\n      selectedOption={selectedOption}\n      menuTrigger=\"focus\"\n      icon={null}\n      inputPlaceholder=\"Select option\"\n      onSelectionChange={(newSelectedOption) => {\n        setValue(newSelectedOption?.key);\n      }}\n      isDisabled={props.isDisabled}\n    >\n      {(item) => (\n        <ComboBoxItem key={item._comboboxKey} textValue={item.label}>\n          {item.label}\n        </ComboBoxItem>\n      )}\n    </ComboBox>\n  );\n}\n","import React, { useLayoutEffect } from \"react\";\nimport { useEffect, useState } from \"react\";\n\nimport { isVariable, z } from \"@rollouthq/common\";\nimport * as ActionInputs from \"@rollouthq/connect-react/components/action-inputs\";\nimport { AppComponentRendererContext } from \"@rollouthq/connect-react/components/app-component-renderer/app-component-renderer-context\";\nimport { PartialActionRef } from \"@rollouthq/connect-react/components/automation-form/types\";\nimport { useRolloutApiBaseUrlContext } from \"@rollouthq/connect-react/contexts/api-base-url-context\";\n\nconst useSafeLayoutEffect =\n  typeof document === \"undefined\" ? useEffect : useLayoutEffect;\n\nexport type UseActionRendererDataOpts = {\n  actionRef: PartialActionRef | undefined;\n};\n\nexport type UseActionRendererData = AppComponentRendererContext[\"importedData\"];\n\nexport function useActionRendererData(opts: UseActionRendererDataOpts) {\n  const { actionRef } = opts;\n  const { apiBaseUrl } = useRolloutApiBaseUrlContext();\n\n  const [actionRendererData, setActionRendererData] = useState<\n    UseActionRendererData | undefined\n  >();\n\n  useSafeLayoutEffect(() => {\n    Object.assign(window, {\n      ROLLOUT_CONNECT_DEPS: {\n        zod: { z },\n        react: React,\n        [\"@rollouthq/common\"]: { z, isVariable },\n        [\"@rollouthq/connect-react/components/action-inputs\"]: ActionInputs,\n      },\n    });\n  }, []);\n\n  useSafeLayoutEffect(() => {\n    if (actionRef != null) {\n      const { appKey, actionKey } = actionRef;\n      if (!appKey || !actionKey) {\n        return;\n      }\n\n      const importPath = `${apiBaseUrl}/connect-react/${appKey}/actions/${actionKey}.js`;\n      // Workaround to preserve es2020 dynamic import instead of transpiling it\n      // equivalent for:\n      // import(importPath).then(setActionRendererData);\n      const fnImport = new Function(\"path\", \"return import(path)\");\n      fnImport(importPath).then((data: UseActionRendererData) =>\n        setActionRendererData(data)\n      );\n    }\n  }, [actionRef?.appKey, actionRef?.actionKey]);\n\n  return actionRendererData;\n}\n","import assert from \"assert\";\n\nimport React, { useCallback, useMemo } from \"react\";\n\nimport { useTRPCContext } from \"@rollouthq/api-client-react\";\nimport { AppComponentRenderer } from \"@rollouthq/connect-react/components/app-component-renderer\";\n\nimport { useAutomationFormContext } from \"./context\";\nimport { useTriggerRendererData } from \"./get-trigger-renderer-data\";\nimport { renderField } from \"./helpers/render-field\";\nimport { TriggerAppKeyField } from \"./helpers/trigger-app-key-input\";\nimport { TriggerKeyField } from \"./helpers/trigger-key-input\";\nimport { TriggerCredentialIdInput } from \"./trigger-credential-id-input\";\n\nexport function AutomationFormTrigger() {\n  const { client } = useTRPCContext();\n\n  const { data, setData, renderFields, validation } =\n    useAutomationFormContext();\n\n  const { trigger } = data;\n\n  const triggerRendererData = useTriggerRendererData(trigger);\n\n  const setInputParams = useCallback(\n    (newParams: Record<string, any>) => {\n      setData((currentData) => ({\n        ...currentData,\n        trigger: {\n          ...currentData.trigger!,\n          inputParams: newParams,\n        },\n      }));\n    },\n    [setData]\n  );\n\n  const setCredentialId = useCallback(\n    (newCredentialId: string | undefined) =>\n      setData((currentData) => ({\n        ...currentData,\n        trigger: {\n          ...currentData.trigger!,\n          credentialId: newCredentialId,\n        },\n      })),\n    [setData]\n  );\n\n  const variables = useMemo(() => [], []);\n\n  assert(\n    typeof renderFields?.trigger !== \"function\" &&\n      typeof renderFields?.trigger !== \"boolean\"\n  );\n\n  const triggerAppKeyField = renderField({\n    defaultField: TriggerAppKeyField,\n    renderer: renderFields?.trigger?.appKey,\n    ctx: { TriggerAppKeyField },\n  });\n\n  const triggerKeyField = renderField({\n    defaultField: TriggerKeyField,\n    renderer: renderFields?.trigger?.triggerKey,\n    ctx: { TriggerKeyField },\n  });\n\n  const hasInputParams =\n    triggerRendererData &&\n    (\"inputParamsSchema\" in triggerRendererData\n      ? Object.keys(triggerRendererData.inputParamsSchema.shape).length > 0\n      : triggerRendererData.inputParamDefs.length > 0);\n\n  return (\n    <div className=\"rollout-automation-form__trigger\">\n      <div className=\"rollout-automation-form__label\">Select trigger</div>\n\n      <div className=\"rollout-automation-form__helper-text\">\n        This is the event that will kick off your action\n      </div>\n\n      {triggerAppKeyField}\n\n      <div className=\"rollout-automation-form__trigger-trigger\">\n        {triggerKeyField}\n      </div>\n\n      {trigger?.triggerKey != null && (\n        <TriggerCredentialIdInput\n          appKey={trigger.appKey}\n          credentialId={trigger.credentialId}\n          setCredentialId={setCredentialId}\n          error={\n            validation.success\n              ? undefined\n              : validation.error.issues.find(\n                  (issue) => issue.path.join(\".\") === \"trigger.credentialId\"\n                )\n          }\n        />\n      )}\n\n      {trigger?.credentialId != null && hasInputParams && (\n        <div className=\"rollout-automation-form__trigger-inputs\">\n          <div className=\"rollout-automation-form__trigger-inputs-wrapper\">\n            <AppComponentRenderer\n              api={client}\n              credentialId={trigger.credentialId}\n              inputParams={trigger.inputParams}\n              setInputParams={setInputParams}\n              renderInputParams={renderFields?.trigger?.inputParams}\n              importedData={triggerRendererData}\n              variables={variables}\n              getDynamicOptions={({ inputKey }) =>\n                client.query(\"triggers.getTriggerInputOptions\", {\n                  triggerKey: trigger.triggerKey!,\n                  inputKey,\n                })\n              }\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport { useQuery } from \"@rollouthq/api-client-react\";\nimport { AppIcon } from \"@rollouthq/connect-react/components/app-icon\";\nimport { FieldProps } from \"@rollouthq/connect-react/components/automation-form/helpers/render-field\";\nimport { useRolloutAppKeyContext } from \"@rollouthq/connect-react/contexts/end-user-context\";\nimport { findIssue } from \"@rollouthq/connect-react/utils/find-zod-issue\";\nimport { useFormContext } from \"@rollouthq/connect-react/utils/form\";\nimport {\n  Center,\n  ComboBox,\n  ComboBoxItem,\n  FormControl,\n  Rocket,\n} from \"@rollouthq/ui\";\n\nimport { useAutomationFormContext } from \"../context\";\n\ntype TriggerAppKeyInputProps = {\n  isDisabled?: boolean;\n};\n\nexport function TriggerAppKeyInput(props: TriggerAppKeyInputProps) {\n  const { appKey } = useRolloutAppKeyContext();\n  const { data, setData, validation } = useAutomationFormContext();\n  const { trigger } = data;\n  const triggerApps = useQuery([\"triggers.apps\"]);\n  const { shouldShowErrors } = useFormContext();\n  const error = findIssue(validation, (b) => b.trigger);\n  const options = triggerApps.data ?? [];\n  const selectedApp = options?.find((opt) => opt.key === trigger?.appKey);\n\n  return (\n    <div className=\"rollout-automation-form__trigger-app\">\n      <FormControl error={shouldShowErrors ? error?.message : undefined}>\n        <ComboBox<typeof options[number]>\n          aria-label=\"Trigger app dropdown\"\n          defaultItems={options}\n          selectedOption={selectedApp}\n          menuTrigger=\"focus\"\n          icon={\n            trigger == null ? <Rocket /> : <AppIcon appKey={trigger.appKey} />\n          }\n          isDisabled={props.isDisabled}\n          inputPlaceholder=\"Select app\"\n          onSelectionChange={(newSelectedTriggerApp) => {\n            return setData((currentData) => {\n              if (newSelectedTriggerApp == null) {\n                return {\n                  ...currentData,\n                  trigger: undefined,\n                };\n              }\n\n              const isNewTriggerAppCustomers =\n                newSelectedTriggerApp.key === appKey;\n              const isActionAppCustomers =\n                currentData.action?.appKey === appKey;\n\n              const bothAppsAreCustomers =\n                isNewTriggerAppCustomers && isActionAppCustomers;\n\n              const bothAppsAreThirdParty =\n                !isNewTriggerAppCustomers && !isActionAppCustomers;\n\n              // If both trigger and action are customer's app, unset action\n              const shouldUnsetAction =\n                bothAppsAreCustomers || bothAppsAreThirdParty;\n\n              return {\n                ...currentData,\n                trigger: {\n                  appKey: newSelectedTriggerApp.key,\n                  inputParams: {},\n                },\n                action: shouldUnsetAction ? undefined : currentData.action,\n              };\n            });\n          }}\n        >\n          {(option) => (\n            <ComboBoxItem key={option._comboboxKey} textValue={option.name}>\n              <Center className=\"rollout-listbox__option-icon\">\n                <AppIcon appKey={option.key} />\n              </Center>\n              {option.name}\n            </ComboBoxItem>\n          )}\n        </ComboBox>\n      </FormControl>\n    </div>\n  );\n}\n\nexport function TriggerAppKeyField(props: FieldProps) {\n  return <TriggerAppKeyInput isDisabled={props.disabled} />;\n}\n","import React from \"react\";\n\nimport { useQuery } from \"@rollouthq/api-client-react\";\nimport { AppIcon } from \"@rollouthq/connect-react/components/app-icon\";\nimport { FieldProps } from \"@rollouthq/connect-react/components/automation-form/helpers/render-field\";\nimport { findIssue } from \"@rollouthq/connect-react/utils/find-zod-issue\";\nimport { useFormContext } from \"@rollouthq/connect-react/utils/form\";\nimport {\n  Center,\n  ComboBox,\n  ComboBoxItem,\n  FormControl,\n  Rocket,\n} from \"@rollouthq/ui\";\n\nimport { useAutomationFormContext } from \"../context\";\n\ntype TriggerInputProps = {\n  isDisabled?: boolean;\n};\n\nexport function TriggerKeyInput(props: TriggerInputProps) {\n  const { isDisabled } = props;\n  const { shouldShowErrors } = useFormContext();\n  const { validation, data, setData } = useAutomationFormContext();\n  const { trigger } = data;\n\n  const triggers = useQuery([\"apps.triggers\", { appKey: trigger?.appKey! }], {\n    enabled: trigger?.appKey != null,\n  });\n\n  const error = findIssue(validation, (b) => b.trigger.triggerKey);\n  const options = triggers.data ?? [];\n  const selectedOption = options.find((opt) => opt.key === trigger?.triggerKey);\n\n  return (\n    <FormControl error={shouldShowErrors ? error?.message : undefined}>\n      <ComboBox<typeof options[number]>\n        aria-label=\"Trigger dropdown\"\n        defaultItems={options}\n        selectedOption={selectedOption}\n        menuTrigger=\"focus\"\n        isDisabled={isDisabled || triggers.isLoading}\n        icon={\n          trigger?.appKey == null ? (\n            <Rocket />\n          ) : (\n            <AppIcon appKey={trigger?.appKey} />\n          )\n        }\n        inputPlaceholder=\"Select trigger\"\n        onSelectionChange={(newTrigger) =>\n          setData((currentData) => ({\n            ...currentData,\n            trigger: {\n              ...currentData.trigger!,\n              triggerKey: newTrigger?.key,\n              inputParams: {},\n            },\n          }))\n        }\n      >\n        {(item) => (\n          <ComboBoxItem key={item._comboboxKey} textValue={item.name}>\n            <Center className=\"rollout-listbox__option-icon\">\n              {trigger?.appKey == null ? (\n                <Rocket />\n              ) : (\n                <AppIcon appKey={trigger?.appKey} />\n              )}\n            </Center>\n\n            {item.name}\n          </ComboBoxItem>\n        )}\n      </ComboBox>\n    </FormControl>\n  );\n}\n\nexport function TriggerKeyField(props: FieldProps) {\n  return <TriggerKeyInput isDisabled={props.disabled} />;\n}\n","import React from \"react\";\nimport { ZodIssue } from \"zod\";\n\nimport { useQuery } from \"@rollouthq/api-client-react\";\nimport { AnyAuthCredentialInput } from \"@rollouthq/connect-react/components/credential-input\";\n\nexport type TriggerCredentialIdInputProps = {\n  appKey: string;\n  credentialId: string | undefined;\n  setCredentialId: (newCredentialId: string | undefined) => void;\n  error: ZodIssue | undefined;\n  isDisabled?: boolean;\n};\n\nexport function TriggerCredentialIdInput(props: TriggerCredentialIdInputProps) {\n  const { appKey, credentialId, setCredentialId, error, isDisabled } = props;\n\n  const authInfoQuery = useQuery([\"apps.authInfo\", { appKey }]);\n\n  if (authInfoQuery.data == null) {\n    return null;\n  }\n\n  return (\n    <AnyAuthCredentialInput\n      appKey={appKey}\n      authInfoQuery={authInfoQuery}\n      credentialId={credentialId}\n      setCredentialId={setCredentialId}\n      error={error}\n      isDisabled={isDisabled}\n    />\n  );\n}\n","import React from \"react\";\n\nimport { FieldProps } from \"@rollouthq/connect-react/components/automation-form/helpers/render-field\";\nimport { findIssue } from \"@rollouthq/connect-react/utils/find-zod-issue\";\nimport { useFormContext } from \"@rollouthq/connect-react/utils/form\";\nimport { TextField } from \"@rollouthq/ui\";\n\nimport { useAutomationFormContext } from \"./context\";\n\nexport function NameInput(props: { disabled?: boolean }) {\n  const { disabled = false } = props;\n  const { data, setData, validation } = useAutomationFormContext();\n  const { shouldShowErrors } = useFormContext();\n  const hasError = findIssue(validation, (b) => b.name) != null;\n\n  return (\n    <TextField\n      aria-label=\"Automation Name Input\"\n      className=\"rollout-automation-form__name\"\n      placeholder=\"Give your automation a name\"\n      isDisabled={disabled}\n      value={data.name ?? \"\"}\n      validationState={shouldShowErrors && hasError ? \"invalid\" : \"valid\"}\n      onChange={(newName) =>\n        setData((currentData) => ({\n          ...currentData,\n          name: newName,\n        }))\n      }\n    />\n  );\n}\n\nexport function NameField(props: FieldProps) {\n  return <NameInput {...props} />;\n}\n","import { useMemo } from \"react\";\nimport { AnyZodObject, z } from \"zod\";\n\nexport const zAutomationFormSchema = z.object({\n  name: z.string().min(1),\n  trigger: z.object({\n    appKey: z.string(),\n    triggerKey: z.string(),\n    credentialId: z.string(),\n    inputParams: z.object({}),\n  }),\n  action: z.object({\n    appKey: z.string(),\n    actionKey: z.string(),\n    credentialId: z.string(),\n    inputParams: z.object({}),\n  }),\n});\n\nexport type AutomationFormData = z.output<typeof zAutomationFormSchema>;\nexport type AutomationFormDataInput = PartialAutomationFormData;\n\nexport type MakePartialRef<\n  Type extends {},\n  RequiredProps extends keyof Type\n> = Pick<Type, RequiredProps> & Omit<MaybeUndefinedProps<Type>, RequiredProps>;\n\nexport type PartialActionRef = MakePartialRef<\n  AutomationFormData[\"action\"],\n  \"appKey\" | \"inputParams\"\n>;\n\nexport type PartialTriggerRef = MakePartialRef<\n  AutomationFormData[\"trigger\"],\n  \"appKey\" | \"inputParams\"\n>;\n\nexport type PartialAutomationFormData = Omit<\n  MaybeUndefinedProps<AutomationFormData>,\n  \"action\" | \"trigger\"\n> & {\n  action?: PartialActionRef;\n  trigger?: PartialTriggerRef;\n};\n\ntype MaybeUndefinedProps<T> = { [K in keyof T]?: T[K] | undefined };\n\nexport function useValidateAutomationFormData(opts: {\n  data: PartialAutomationFormData;\n  triggerInputParamsSchema: AnyZodObject;\n  actionInputParamsSchema: AnyZodObject;\n}) {\n  const { data, actionInputParamsSchema, triggerInputParamsSchema } = opts;\n\n  const schema = useMemo(\n    () =>\n      zAutomationFormSchema.extend({\n        trigger: zAutomationFormSchema.shape.trigger.extend({\n          inputParams: triggerInputParamsSchema,\n        }),\n        action: zAutomationFormSchema.shape.action.extend({\n          inputParams: actionInputParamsSchema,\n        }),\n      }),\n    [triggerInputParamsSchema, actionInputParamsSchema]\n  );\n\n  return useMemo(() => {\n    return schema.safeParse(data);\n  }, [data, schema]);\n}\n","import React, { useState } from \"react\";\n\nimport {\n  InferQueryOutput,\n  useMutation,\n  useQuery,\n  useTRPCContext,\n} from \"@rollouthq/api-client-react\";\nimport {\n  AutomationForm,\n  PartialAutomationFormData,\n  AutomationFormData,\n  AutomationFormProps,\n} from \"@rollouthq/connect-react/components/automation-form\";\n\ntype Automation = NonNullable<InferQueryOutput<\"automations.get\">>;\n\ntype AutomationEditorProps = {\n  automationId: string;\n  onAutomationDeleted?: () => void;\n  onAutomationUpdated?: (automation: Automation) => void;\n  onCancel?: () => void;\n  renderFields?: AutomationFormProps[\"renderFields\"];\n};\n\nexport function AutomationEditor(props: AutomationEditorProps) {\n  const {\n    automationId,\n    onAutomationDeleted,\n    onAutomationUpdated,\n    onCancel,\n    renderFields,\n  } = props;\n  const { invalidateQueries } = useTRPCContext();\n\n  const deleteAutomation = useMutation(\"automations.delete\", {\n    onSuccess: () => invalidateQueries([\"automations.list\"]),\n  });\n\n  const [automationFormData, setAutomationFormData] =\n    useState<PartialAutomationFormData>({});\n\n  const automation = useQuery([\"automations.get\", { automationId }], {\n    onSuccess(aut) {\n      if (aut != null) {\n        setAutomationFormData({\n          name: aut.name,\n          action: aut.action,\n          trigger: aut.trigger,\n        });\n      }\n    },\n  });\n\n  const updateAutomationMutation = useMutation(\"automations.update\");\n\n  if (automation.isLoading) {\n    return null;\n  }\n\n  if (automation.data == null) {\n    return (\n      <div className=\"rollout-automations-editor__not-found\">\n        Automation not found\n      </div>\n    );\n  }\n\n  const editAutomation = async (data: AutomationFormData) => {\n    const updatedAutomation = await updateAutomationMutation.mutateAsync({\n      id: automationId,\n      automationData: {\n        name: data.name,\n        action: data.action,\n        trigger: data.trigger,\n      },\n    });\n\n    onAutomationUpdated?.(updatedAutomation);\n  };\n\n  const onDelete = () => {\n    deleteAutomation.mutate(\n      { id: automation.data.id },\n      {\n        onSuccess: () => {\n          onAutomationDeleted?.();\n        },\n      }\n    );\n  };\n\n  return (\n    <div className=\"rollout-automation-editor\">\n      <AutomationForm\n        mode=\"edit\"\n        data={automationFormData}\n        renderFields={renderFields}\n        onUpdate={setAutomationFormData}\n        isSaving={updateAutomationMutation.isLoading}\n        onSave={editAutomation}\n        onDelete={onDelete}\n        onCancel={onCancel}\n      />\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\n\nimport {\n  AutomationCreator,\n  AutomationCreatorProps,\n} from \"@rollouthq/connect-react/components/automation-creator\";\nimport { AutomationEditor } from \"@rollouthq/connect-react/components/automation-editor\";\nimport { AutomationFormProps } from \"@rollouthq/connect-react/components/automation-form\";\nimport {\n  MyAutomations,\n  MyAutomationsProps,\n} from \"@rollouthq/connect-react/components/my-automations\";\nimport { ArrowBack } from \"@rollouthq/ui\";\n\nexport type AutomationsManagerProps = {\n  onAutomationCreated?: AutomationCreatorProps[\"onAutomationCreated\"];\n  onBeforeAutomationCreate?: AutomationCreatorProps[\"onBeforeAutomationCreate\"];\n  prefilled?: AutomationCreatorProps[\"prefilled\"];\n  filter?: MyAutomationsProps[\"filter\"];\n  renderFields?: AutomationFormProps[\"renderFields\"];\n};\n\ntype AutomationsManagerView =\n  | { mode: \"LIST\" }\n  | { mode: \"CREATE\" }\n  | { mode: \"EDIT\"; automationId: string };\n\nexport function AutomationsManager(props: AutomationsManagerProps) {\n  const {\n    onAutomationCreated,\n    onBeforeAutomationCreate,\n    prefilled,\n    filter,\n    renderFields,\n  } = props;\n\n  const [currentView, setCurrentView] = useState<AutomationsManagerView>({\n    mode: \"LIST\",\n  });\n\n  return (\n    <div className=\"rollout-automations-manager\">\n      {currentView.mode === \"LIST\" && (\n        <MyAutomations\n          onEditAutomation={(aut) =>\n            setCurrentView({ mode: \"EDIT\", automationId: aut.id })\n          }\n          onCreateAutomation={() => setCurrentView({ mode: \"CREATE\" })}\n          filter={filter}\n        />\n      )}\n\n      {(currentView.mode === \"CREATE\" || currentView.mode === \"EDIT\") && (\n        <div className=\"rollout-automations-manager__navbar\">\n          <button\n            type=\"button\"\n            aria-label=\"Return to automations list button\"\n            className=\"rollout-automations-manager__back-btn\"\n            onClick={() => setCurrentView({ mode: \"LIST\" })}\n          >\n            <ArrowBack className=\"rollout-automation-form__header-back__arrow\" />\n          </button>\n        </div>\n      )}\n      {currentView.mode === \"CREATE\" && (\n        <AutomationCreator\n          onBeforeAutomationCreate={onBeforeAutomationCreate}\n          onAutomationCreated={(createdData) => {\n            onAutomationCreated?.(createdData);\n            setCurrentView({ mode: \"LIST\" });\n          }}\n          prefilled={prefilled}\n          renderFields={renderFields}\n        />\n      )}\n      {currentView.mode === \"EDIT\" && (\n        <AutomationEditor\n          automationId={currentView.automationId}\n          onAutomationUpdated={() => setCurrentView({ mode: \"LIST\" })}\n          onAutomationDeleted={() => setCurrentView({ mode: \"LIST\" })}\n          renderFields={renderFields}\n        />\n      )}\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\n\nimport {\n  InferQueryOutput,\n  useMutation,\n  useQuery,\n  useTRPCContext,\n} from \"@rollouthq/api-client-react\";\nimport { AutomationsList } from \"@rollouthq/connect-react/components/automations-list\";\nimport { Plus } from \"@rollouthq/ui\";\n\ntype AutomationsListItem = InferQueryOutput<\"automations.list\">[number];\n\nexport type AutomationFilterData = {\n  name?: string;\n  trigger: {\n    appKey?: string;\n    triggerKey?: string;\n    inputParams?: Record<string, any>;\n  };\n  action: {\n    appKey?: string;\n    actionKey?: string;\n    inputParams?: Record<string, any>;\n  };\n};\n\nexport type MyAutomationsProps = {\n  onEditAutomation: (automation: AutomationsListItem) => void;\n  onCreateAutomation: () => void;\n  filter?: (automation: AutomationFilterData) => boolean;\n};\n\nexport function MyAutomations(props: MyAutomationsProps) {\n  const { onEditAutomation, onCreateAutomation, filter } = props;\n  const { invalidateQueries } = useTRPCContext();\n  const [automationData, setAutomationData] = useState<AutomationsListItem[]>(\n    () => []\n  );\n\n  const automations = useQuery([\"automations.list\"]);\n\n  useEffect(() => {\n    if (automations.data != null) {\n      if (filter != null) {\n        setAutomationData(\n          automations.data.filter((a: AutomationsListItem) => {\n            try {\n              return filter(a as AutomationFilterData);\n            } catch (filterError) {\n              console.error(filterError);\n              return false;\n            }\n          })\n        );\n      } else {\n        setAutomationData(automations.data);\n      }\n    }\n  }, [automations.data, filter]);\n\n  const deleteAutomation = useMutation(\"automations.delete\", {\n    onSuccess: () => invalidateQueries([\"automations.list\"]),\n  });\n\n  return (\n    <div>\n      <div className=\"rollout-automations-list__header\">\n        <span className=\"rollout-automations-list__header-title\">\n          My automations\n        </span>\n\n        <button\n          type=\"button\"\n          aria-label=\"New automation button\"\n          className=\"rollout-automations-list__new-btn\"\n          onClick={() => onCreateAutomation()}\n        >\n          <Plus />\n          New\n        </button>\n      </div>\n\n      <AutomationsList\n        automations={automationData ?? []}\n        isLoading={automations.isFetching}\n        isDeleting={deleteAutomation.isLoading}\n        onDeleteAutomation={(at) => deleteAutomation.mutate({ id: at.id })}\n        onEditAutomation={onEditAutomation}\n      />\n    </div>\n  );\n}\n","import { matchSorter } from \"match-sorter\";\nimport React, { useEffect, useState } from \"react\";\n\nimport { InferQueryOutput } from \"@rollouthq/api-client-react\";\nimport { AppIcon } from \"@rollouthq/connect-react/components/app-icon\";\nimport {\n  isChildofInteractiveElement,\n  Center,\n  Search,\n  TextField,\n  Spinner,\n  dataAttr,\n} from \"@rollouthq/ui\";\nimport { useToggle, Trash } from \"@rollouthq/ui\";\n\ntype AutomationsListItem = InferQueryOutput<\"automations.list\">[number];\n\nexport type AutomationsListProps = {\n  automations: AutomationsListItem[];\n  isLoading?: boolean;\n  isDeleting?: boolean;\n  onEditAutomation: (automation: AutomationsListItem) => void;\n  onDeleteAutomation: (automation: AutomationsListItem) => void;\n};\n\nexport function AutomationsList(props: AutomationsListProps) {\n  const {\n    automations,\n    isLoading = false,\n    isDeleting = false,\n    onEditAutomation,\n    onDeleteAutomation,\n  } = props;\n\n  const [query, setQuery] = useState(\"\");\n\n  const automationFiltered = matchSorter(automations, query, {\n    keys: [\"name\", \"action.app.name\"],\n    threshold: matchSorter.rankings.ACRONYM,\n  });\n\n  const isEmptyAutomations = automationFiltered.length === 0;\n\n  return (\n    <div className=\"rollout-automations-list__container\">\n      <div className=\"rollout-automations-list__search-input__group\">\n        <div className=\"rollout-automations-list__search-input__left-element\">\n          <Search />\n        </div>\n\n        <TextField\n          aria-label=\"Search automations text field\"\n          placeholder=\"Search automations\"\n          value={query}\n          onChange={setQuery}\n          className=\"rollout-automations-list__search-input\"\n        />\n      </div>\n\n      {isLoading && (\n        <div className=\"rollout__loading_spinner_container\">\n          <Spinner className=\"rollout__loading_spinner\" />\n        </div>\n      )}\n\n      {!isLoading && isEmptyAutomations && (\n        <div className=\"rollout-automations-list__empty-msg\">\n          No automations found\n        </div>\n      )}\n\n      <div className=\"rollout-automations-list__list\">\n        {automationFiltered.map((automation) => (\n          <AutomationsListItem\n            key={automation.id}\n            automation={automation}\n            onEdit={() => onEditAutomation(automation)}\n            onDelete={() => onDeleteAutomation(automation)}\n            isDeleting={isDeleting}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\ntype AutomationsListItemProps = {\n  automation: AutomationsListItem;\n  onEdit: () => void;\n  onDelete: () => void;\n  isDeleting: boolean;\n};\n\nfunction AutomationsListItem(props: AutomationsListItemProps) {\n  const { automation, onEdit, onDelete, isDeleting } = props;\n  const [isOpen, toggleDeleteMenu] = useToggle();\n  const [itemDeleting, setItemDeleting] = useState(false);\n\n  useEffect(() => {\n    if (!isDeleting && itemDeleting) {\n      setItemDeleting(false);\n    }\n  }, [isDeleting]);\n\n  const optionsList = isOpen && (\n    <div\n      className=\"rollout-automations-list-item__options__content\"\n      onMouseLeave={() => {\n        if (isOpen) {\n          toggleDeleteMenu();\n        }\n      }}\n    >\n      <span>Really delete?</span>\n      <button\n        type=\"button\"\n        aria-label=\"Confirm deletion button\"\n        onClick={() => {\n          onDelete();\n          setItemDeleting(true);\n        }}\n        className=\"rollout-automations-list-item__options__delete-item-btn\"\n      >\n        Delete\n      </button>\n\n      <button\n        type=\"button\"\n        aria-label=\"Cancel deletion button\"\n        onClick={toggleDeleteMenu}\n        className=\"rollout-automations-list-item__options__cancel-item-btn\"\n      >\n        Cancel\n      </button>\n    </div>\n  );\n\n  return (\n    <div\n      className=\"rollout-automations-list__item-wrapper\"\n      data-deleting={dataAttr(itemDeleting)}\n    >\n      {optionsList}\n      <div\n        className=\"rollout-automations-list__item\"\n        role=\"group\"\n        data-open={dataAttr(isOpen)}\n        onClick={(e) => {\n          if (!isChildofInteractiveElement(e.target as Element)) {\n            onEdit();\n          }\n        }}\n      >\n        <div className=\"rollout-automations-list-item__header\">\n          <div className=\"rollout-automations-list-item__icons\">\n            <Center className=\"rollout-automations-list-item__trigger\">\n              <AppIcon appKey={automation.trigger.appKey} />\n            </Center>\n            <Center className=\"rollout-automations-list-item__action\">\n              <AppIcon appKey={automation.action.appKey} />\n            </Center>\n          </div>\n          <div\n            role=\"button\"\n            className=\"rollout-automations-list-item__options__trigger\"\n            onClick={toggleDeleteMenu}\n          >\n            <Trash />\n          </div>\n        </div>\n        <div className=\"rollout-automations-list-item__name\">\n          {automation.name}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useSpinDelay } from \"spin-delay\";\n\nimport {\n  useLazyQuery,\n  useMutation,\n  useQuery,\n  useTRPCContext,\n} from \"@rollouthq/api-client-react\";\nimport type { AutomationThirdPartyActionRef } from \"@rollouthq/api/engine/automations/action-ref\";\nimport { inputDefToZodObject } from \"@rollouthq/common/\";\nimport { AppComponentRenderer } from \"@rollouthq/connect-react/components/app-component-renderer\";\nimport { AppIcon } from \"@rollouthq/connect-react/components/app-icon\";\nimport { useActionRendererData } from \"@rollouthq/connect-react/components/automation-form/get-action-renderer-data\";\nimport { useTriggerRendererData } from \"@rollouthq/connect-react/components/automation-form/get-trigger-renderer-data\";\nimport { PartialActionRef } from \"@rollouthq/connect-react/components/automation-form/types\";\nimport { AnyAuthCredentialInput } from \"@rollouthq/connect-react/components/credential-input\";\nimport { useCredentialHandler } from \"@rollouthq/connect-react/hooks/use-credential-handler\";\nimport { FormContextProvider } from \"@rollouthq/connect-react/utils/form\";\nimport { Center, FormControl, Spinner, useAsyncMemo } from \"@rollouthq/ui\";\n\nimport {\n  PartialBlueprintActivatorData,\n  useValidateBlueprintActivatorFormData,\n  zBlueprintActivatorFormSchema,\n} from \"./types\";\n\nexport type BlueprintActivatorProps = {\n  blueprintId: string;\n};\n\nexport function BlueprintActivator(props: BlueprintActivatorProps) {\n  const { blueprintId } = props;\n\n  const { client, invalidateQueries } = useTRPCContext();\n\n  const [data, setData] = useState<PartialBlueprintActivatorData | undefined>();\n\n  const triggerPayloadSchema = useLazyQuery(\"triggers.getPayloadSchema\");\n  const triggerAuthType = useLazyQuery(\"apps.authInfo\");\n  const triggersForApp = useLazyQuery(\"apps.triggers\");\n\n  const triggerRendererData = useTriggerRendererData(data?.trigger);\n\n  useEffect(() => {\n    const trigger = data?.trigger;\n\n    if (trigger == null) {\n      return;\n    }\n\n    triggerAuthType.fetch({ appKey: trigger.appKey });\n    triggersForApp.fetch({ appKey: trigger.appKey });\n\n    if (trigger.triggerKey != null && trigger.appKey != null) {\n      triggerPayloadSchema.fetch({\n        appKey: trigger.appKey,\n        triggerKey: trigger.triggerKey,\n      });\n    }\n  }, [data?.trigger]);\n\n  const authType = useLazyQuery(\"apps.authInfo\");\n\n  useEffect(() => {\n    if (data?.action?.appKey != null) {\n      authType.fetch({ appKey: data.action.appKey });\n    }\n  }, [data?.action?.appKey]);\n\n  const blueprint = useQuery(\n    [\n      \"blueprints.get\",\n      {\n        blueprintId,\n      },\n    ],\n    {\n      onSuccess: (bp) => {\n        if (data == null) {\n          if (bp.automation != null) {\n            setData({\n              name: bp.automation.name,\n              action: bp.automation.action,\n              trigger: bp.automation.trigger,\n            });\n          } else {\n            setData({\n              name: bp.name,\n              action: bp.action,\n              trigger: bp.trigger,\n            });\n          }\n        }\n      },\n    }\n  );\n\n  const createAutomation = useMutation(\"blueprints.createAutomation\");\n  const deactivateAutomation = useMutation(\"blueprints.deactivateAutomation\");\n\n  const triggerInputParamsSchema = useMemo(() => {\n    if (triggerRendererData == null) {\n      return zBlueprintActivatorFormSchema.shape.action.shape.inputParams;\n    }\n    if (\"inputParamsSchema\" in triggerRendererData) {\n      return triggerRendererData.inputParamsSchema;\n    } else {\n      return inputDefToZodObject(triggerRendererData.inputParamDefs);\n    }\n  }, [triggerRendererData]);\n\n  const actionRendererData = useActionRendererData({\n    actionRef: data?.action,\n  });\n\n  const actionInputParamsSchema = useMemo(() => {\n    if (actionRendererData == null) {\n      return zBlueprintActivatorFormSchema.shape.action.shape.inputParams;\n    }\n    if (\"inputParamsSchema\" in actionRendererData) {\n      return actionRendererData.inputParamsSchema;\n    } else {\n      return inputDefToZodObject(actionRendererData.inputParamDefs);\n    }\n  }, [actionRendererData]);\n\n  const validation = useValidateBlueprintActivatorFormData({\n    data,\n    triggerInputParamsSchema,\n    actionInputParamsSchema,\n  });\n\n  const setTriggerCredentialId = useCallback(\n    (newCredentialId: string) =>\n      setData((currentData) => ({\n        ...currentData,\n        trigger: {\n          ...currentData?.trigger!,\n          credentialId: newCredentialId,\n        },\n      })),\n    [setData]\n  );\n\n  const setActionCredentialId = useCallback(\n    (newCredentialId: string) =>\n      setData((currentData) => ({\n        ...currentData,\n        action: {\n          ...currentData?.action!,\n          credentialId: newCredentialId,\n        },\n      })),\n    [setData]\n  );\n\n  useCredentialHandler({\n    appKey: data?.trigger?.appKey,\n    setCredentialId: setTriggerCredentialId,\n  });\n\n  const setTriggerInputParams = useCallback(\n    (newParams: Record<string, any>) => {\n      setData((currentData) => ({\n        ...currentData,\n        trigger: {\n          ...currentData!.trigger!,\n          inputParams: newParams,\n        },\n      }));\n    },\n    [setData]\n  );\n\n  const triggersQuery = useQuery(\n    [\"apps.triggers\", { appKey: data?.trigger?.appKey! }],\n    { enabled: data?.trigger?.appKey != null }\n  );\n\n  const selectedTrigger = triggersQuery.data?.find(\n    (t) => t.key === data?.trigger?.triggerKey\n  );\n\n  const triggerPayloadSchemaAsync = useAsyncMemo(async () => {\n    if (selectedTrigger == null) {\n      return [];\n    }\n    if (selectedTrigger.payloadConfiguration.type === \"static\") {\n      return selectedTrigger.payloadConfiguration.staticSchema;\n    }\n    return await client.query(\"triggers.getPayloadSchema\", {\n      appKey: data?.trigger?.appKey!,\n      triggerKey: data?.trigger?.triggerKey!,\n      inputParams: data?.trigger?.inputParams!,\n    });\n  }, [\n    JSON.stringify(selectedTrigger?.payloadConfiguration),\n    JSON.stringify(data?.trigger),\n  ]);\n\n  const triggerPayloadVariables = useMemo(\n    () =>\n      (triggerPayloadSchemaAsync.value ?? []).map((prop) => ({\n        id: prop.key,\n        label: prop.label,\n        type: \"string\" as const,\n      })),\n    [triggerPayloadSchemaAsync.value]\n  );\n\n  function maybeRenderActionRender() {\n    if (data?.action == null) {\n      return null;\n    }\n\n    if (actionRendererData == null) {\n      return null;\n    }\n\n    return (\n      <div className=\"rollout-automation-form__action-inputs\">\n        <div>\n          <div className=\"rollout-automation-form__label\">Set up action</div>\n\n          <div className=\"rollout-automation-form__credential\">\n            <FormControl label=\"Account\" isRequired>\n              <AnyAuthCredentialInput\n                error={\n                  validation.success\n                    ? undefined\n                    : validation.error.issues.find(\n                        (issue) =>\n                          issue.path.join(\".\") === \"action.credentialId\"\n                      )\n                }\n                credentialId={data.action.credentialId}\n                setCredentialId={(newCredentialId) => {\n                  const newAction: PartialActionRef = {\n                    ...(data.action as AutomationThirdPartyActionRef),\n                    credentialId: newCredentialId,\n                  };\n\n                  setData({\n                    ...data,\n                    action: newAction,\n                  });\n                }}\n                authInfoQuery={authType}\n                appKey={data.action.appKey}\n              />\n            </FormControl>\n          </div>\n\n          <div className=\"rollout-automation-form__action-inputs-wrapper\">\n            <AppComponentRenderer\n              isBlueprintActivation\n              api={client}\n              credentialId={data.action.credentialId!}\n              inputParams={data.action.inputParams}\n              setInputParams={(newParams) =>\n                setData({\n                  ...data,\n                  action: {\n                    ...(data.action as PartialActionRef),\n                    inputParams: newParams,\n                  },\n                })\n              }\n              renderInputParams={undefined}\n              importedData={actionRendererData}\n              variables={triggerPayloadVariables}\n              getDynamicOptions={() => {\n                throw new Error(\"Dynamic options not implemented in actions\");\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const isActivated = blueprint.data?.automation?.active ?? false;\n\n  const [shouldShowErrors, setShouldShowErrors] = useState(false);\n\n  const formContext = useMemo(\n    () => ({ shouldShowErrors, setShouldShowErrors }),\n    [shouldShowErrors, setShouldShowErrors]\n  );\n\n  const triggerInputVariables = useMemo(() => [], []);\n\n  async function activate() {\n    setShouldShowErrors(true);\n    if (validation.success) {\n      const d = validation.data;\n\n      await createAutomation.mutateAsync({\n        blueprintId,\n        trigger: {\n          credentialId: d.trigger.credentialId,\n          inputParams: d.trigger.inputParams,\n        },\n        action: {\n          credentialId: d.action.credentialId,\n          inputParams: d.action.inputParams,\n        },\n      });\n\n      invalidateQueries([\"blueprints.getAutomation\", { blueprintId }]);\n      invalidateQueries([\"blueprints.get\", { blueprintId }]);\n      invalidateQueries(\"blueprints.list\");\n    } else {\n      console.log(data);\n      console.error(validation.error);\n    }\n  }\n\n  async function deactivate() {\n    await deactivateAutomation.mutateAsync({ blueprintId });\n\n    invalidateQueries([\"blueprints.getAutomation\", { blueprintId }]);\n    invalidateQueries([\"blueprints.get\", { blueprintId }]);\n    invalidateQueries(\"blueprints.list\");\n  }\n\n  const showSpinner = useSpinDelay(data == null, {\n    delay: 500,\n    minDuration: 200,\n  });\n\n  if (data == null) {\n    return null;\n  }\n\n  if (showSpinner) {\n    return (\n      <div className=\"rollout__loading_spinner_container\">\n        <Spinner className=\"rollout__loading_spinner\" />\n      </div>\n    );\n  }\n\n  const hasInputParams =\n    triggerRendererData &&\n    (\"inputParamsSchema\" in triggerRendererData\n      ? Object.keys(triggerRendererData.inputParamsSchema.shape).length > 0\n      : triggerRendererData.inputParamDefs.length > 0);\n\n  const triggerInputs = data.trigger?.triggerKey != null && (\n    <div className=\"rollout-blueprint-activator__trigger\">\n      <div className=\"rollout-blueprint-activator__label\">Set up trigger</div>\n\n      <div className=\"rollout-blueprint-activator__trigger__fields\">\n        <AnyAuthCredentialInput\n          error={\n            validation.success\n              ? undefined\n              : validation.error.issues.find(\n                  (issue) => issue.path.join(\".\") === \"trigger.credentialId\"\n                )\n          }\n          appKey={data.trigger.appKey}\n          setCredentialId={(newCredentialId) =>\n            setData({\n              ...data,\n              trigger: {\n                ...data.trigger!,\n                credentialId: newCredentialId,\n              },\n            })\n          }\n          authInfoQuery={triggerAuthType}\n          credentialId={data.trigger.credentialId}\n        />\n\n        {data.trigger.credentialId != null && hasInputParams && (\n          <div className=\"rollout-automation-form__trigger-inputs-wrapper\">\n            <AppComponentRenderer\n              api={client}\n              credentialId={data.trigger.credentialId}\n              inputParams={data.trigger.inputParams}\n              setInputParams={setTriggerInputParams}\n              renderInputParams={undefined}\n              importedData={triggerRendererData}\n              variables={triggerInputVariables}\n              getDynamicOptions={({ inputKey }) =>\n                client.query(\"triggers.getTriggerInputOptions\", {\n                  triggerKey: data.trigger?.triggerKey!,\n                  inputKey,\n                })\n              }\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  return (\n    <FormContextProvider value={formContext}>\n      <div>\n        {blueprint.data != null && (\n          <div>\n            <div className=\"rollout-blueprint-activator__header\">\n              <div className=\"rollout-automations-list-item__icons\">\n                <Center className=\"rollout-automations-list-item__trigger\">\n                  <AppIcon appKey={blueprint.data.trigger.appKey} />\n                </Center>\n                <Center className=\"rollout-automations-list-item__action\">\n                  <AppIcon appKey={blueprint.data.action.appKey} />\n                </Center>\n              </div>\n\n              <div className=\"rollout-blueprint-activator__name\">\n                {blueprint.data.name}\n              </div>\n            </div>\n\n            {triggerInputs}\n\n            {maybeRenderActionRender()}\n\n            <div>\n              {isActivated ? (\n                <button\n                  type=\"button\"\n                  aria-label=\"Deactivation button\"\n                  disabled={createAutomation.isLoading}\n                  className=\"rollout-blueprint-activator__deactivate-btn rollout-button--primary\"\n                  onClick={deactivate}\n                >\n                  {createAutomation.isLoading\n                    ? \"Deactivating...\"\n                    : \"Deactivate\"}\n                </button>\n              ) : (\n                <button\n                  type=\"button\"\n                  aria-label=\"Activation button\"\n                  disabled={createAutomation.isLoading}\n                  className=\"rollout-blueprint-activator__activate-btn rollout-button--primary\"\n                  onClick={activate}\n                >\n                  {createAutomation.isLoading ? \"Activating...\" : \"Activate\"}\n                </button>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </FormContextProvider>\n  );\n}\n","import { useMemo } from \"react\";\nimport { AnyZodObject, z } from \"zod\";\n\nimport {\n  PartialActionRef,\n  PartialTriggerRef,\n} from \"@rollouthq/connect-react/components/automation-form/types\";\n\nexport const zBlueprintActivatorFormSchema = z.object({\n  name: z.string().min(1),\n  trigger: z.object({\n    appKey: z.string(),\n    triggerKey: z.string(),\n    credentialId: z.string(),\n    inputParams: z.object({}),\n  }),\n  action: z.object({\n    appKey: z.string(),\n    actionKey: z.string(),\n    credentialId: z.string(),\n    inputParams: z.object({}),\n  }),\n});\n\nexport type BlueprintActivatorFormData = z.output<\n  typeof zBlueprintActivatorFormSchema\n>;\n\nexport type BlueprintActivatorFormDataInput = z.input<\n  typeof zBlueprintActivatorFormSchema\n>;\n\nexport type PartialBlueprintActivatorData = {\n  name?: string | undefined;\n  trigger?: PartialTriggerRef;\n  action?: PartialActionRef;\n};\n\nexport function useValidateBlueprintActivatorFormData(opts: {\n  data: any;\n  triggerInputParamsSchema: AnyZodObject;\n  actionInputParamsSchema: AnyZodObject;\n}) {\n  const { data = {}, actionInputParamsSchema, triggerInputParamsSchema } = opts;\n\n  const schema = useMemo(\n    () =>\n      zBlueprintActivatorFormSchema.extend({\n        trigger: zBlueprintActivatorFormSchema.shape.trigger.extend({\n          inputParams: triggerInputParamsSchema,\n        }),\n        action: zBlueprintActivatorFormSchema.shape.action.extend({\n          inputParams: actionInputParamsSchema,\n        }),\n      }),\n    [actionInputParamsSchema, triggerInputParamsSchema]\n  );\n\n  return useMemo(() => {\n    return schema.safeParse(data);\n  }, [data, schema]);\n}\n","import { matchSorter } from \"match-sorter\";\nimport React, { useState } from \"react\";\n\nimport {\n  InferQueryOutput,\n  useMutation,\n  useTRPCContext,\n} from \"@rollouthq/api-client-react\";\nimport { AppIcon } from \"@rollouthq/connect-react/components/app-icon\";\nimport {\n  isChildofInteractiveElement,\n  Center,\n  Search,\n  TextField,\n  Spinner,\n  Switch,\n} from \"@rollouthq/ui\";\n\ntype BlueprintsListItem = InferQueryOutput<\"blueprints.list\">[number];\n\nexport type BlueprintsListProps = {\n  blueprints: BlueprintsListItem[];\n  isLoading?: boolean;\n  onOpenActivationForm: (blueprint: BlueprintsListItem) => void;\n};\n\nexport function BlueprintsList(props: BlueprintsListProps) {\n  const { blueprints, isLoading = false, onOpenActivationForm } = props;\n\n  const [query, setQuery] = useState(\"\");\n\n  const blueprintsFiltered = matchSorter(blueprints, query, {\n    keys: [\"name\", \"action.app.name\"],\n    threshold: matchSorter.rankings.ACRONYM,\n  });\n\n  const isFilteredListEmpty = blueprintsFiltered.length === 0;\n\n  return (\n    <div className=\"rollout-automations-list__container\">\n      <div className=\"rollout-automations-list__search-input__group\">\n        <div className=\"rollout-automations-list__search-input__left-element\">\n          <Search />\n        </div>\n\n        <TextField\n          placeholder=\"Search blueprints\"\n          value={query}\n          onChange={setQuery}\n          className=\"rollout-automations-list__search-input\"\n        />\n      </div>\n\n      {isLoading && (\n        <div className=\"rollout__loading_spinner_container\">\n          <Spinner className=\"rollout__loading_spinner\" />\n        </div>\n      )}\n\n      {!isLoading && isFilteredListEmpty && (\n        <div className=\"rollout-automations-list__empty-msg\">\n          No blueprints found\n        </div>\n      )}\n\n      <div className=\"rollout-automations-list__list\">\n        {blueprintsFiltered.map((blueprint) => (\n          <BlueprintsListItem\n            key={blueprint.id}\n            blueprint={blueprint}\n            onOpenActivationForm={() => onOpenActivationForm(blueprint)}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\ntype BlueprintsListItemProps = {\n  blueprint: BlueprintsListItem;\n  onOpenActivationForm: () => void;\n};\n\nfunction BlueprintsListItem(props: BlueprintsListItemProps) {\n  const { blueprint, onOpenActivationForm } = props;\n  const { invalidateQueries } = useTRPCContext();\n  const deactivateAutomation = useMutation(\"blueprints.deactivateAutomation\");\n  const active = blueprint.automation?.active ?? false;\n\n  return (\n    <div className=\"rollout-automations-list__item-wrapper\">\n      <div\n        className=\"rollout-automations-list__item\"\n        role=\"group\"\n        onClick={(e) => {\n          if (!isChildofInteractiveElement(e.target as Element)) {\n            onOpenActivationForm();\n          }\n        }}\n      >\n        <div className=\"rollout-automations-list-item__header\">\n          <div className=\"rollout-automations-list-item__icons\">\n            <Center className=\"rollout-automations-list-item__trigger\">\n              <AppIcon appKey={blueprint.trigger.appKey} />\n            </Center>\n            <Center className=\"rollout-automations-list-item__action\">\n              <AppIcon appKey={blueprint.action.appKey} />\n            </Center>\n          </div>\n\n          <div className=\"rollout-automations-list-item__switch\">\n            <Switch\n              isSelected={active}\n              onChange={async () => {\n                if (active) {\n                  const blueprintId = blueprint.id;\n\n                  await deactivateAutomation.mutateAsync({ blueprintId });\n\n                  invalidateQueries([\"blueprints.get\", { blueprintId }]);\n                  invalidateQueries([\n                    \"blueprints.getAutomation\",\n                    { blueprintId },\n                  ]);\n                  invalidateQueries([\"blueprints.list\"]);\n                } else {\n                  onOpenActivationForm();\n                }\n              }}\n            />\n          </div>\n        </div>\n        <div className=\"rollout-automations-list-item__name\">\n          {blueprint.name}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\n\nimport { BlueprintActivator } from \"@rollouthq/connect-react/components/blueprint-activator\";\nimport { MyBlueprints } from \"@rollouthq/connect-react/components/my-blueprints\";\nimport { ArrowBack } from \"@rollouthq/ui\";\n\nexport type BlueprintsManagerView =\n  | { mode: \"LIST\" }\n  | { mode: \"ACTIVATE\"; blueprintId: string };\n\nexport function BlueprintsManager() {\n  const [currentView, setCurrentView] = useState<BlueprintsManagerView>({\n    mode: \"LIST\",\n  });\n\n  return (\n    <div className=\"rollout-automations-manager\">\n      {currentView.mode === \"LIST\" && (\n        <MyBlueprints\n          onOpenActivationForm={(bp) => {\n            setCurrentView({ mode: \"ACTIVATE\", blueprintId: bp.id });\n          }}\n        />\n      )}\n\n      {currentView.mode === \"ACTIVATE\" && (\n        <>\n          <div className=\"rollout-automations-manager__navbar\">\n            <button\n              type=\"button\"\n              aria-label=\"Return to blueprints list button\"\n              className=\"rollout-blueprints-manager__back-btn\"\n              onClick={() => setCurrentView({ mode: \"LIST\" })}\n            >\n              <ArrowBack className=\"rollout-automation-form__header-back__arrow\" />\n            </button>\n          </div>\n\n          <BlueprintActivator blueprintId={currentView.blueprintId} />\n        </>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport { InferQueryOutput, useQuery } from \"@rollouthq/api-client-react\";\nimport { BlueprintsList } from \"@rollouthq/connect-react/components/blueprints-list\";\n\ntype BlueprintListItem = InferQueryOutput<\"blueprints.list\">[number];\n\nexport type MyBlueprintsProps = {\n  onOpenActivationForm: (blueprint: BlueprintListItem) => void;\n};\n\nexport function MyBlueprints(props: MyBlueprintsProps) {\n  const { onOpenActivationForm } = props;\n\n  const blueprints = useQuery([\"blueprints.list\"]);\n\n  return (\n    <div>\n      <div className=\"rollout-automations-list__header\">\n        <span className=\"rollout-automations-list__header-title\">\n          My blueprints\n        </span>\n      </div>\n\n      <BlueprintsList\n        blueprints={blueprints.data ?? []}\n        isLoading={blueprints.isFetching}\n        onOpenActivationForm={onOpenActivationForm}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport { RolloutIcon, st } from \"@rollouthq/ui\";\n\nexport function PoweredByRollout() {\n  return (\n    <st.div css={{ textAlign: \"center\" }}>\n      <st.div\n        css={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        }}\n      >\n        <RolloutIcon width=\"16px\" />\n\n        <st.span\n          css={{ paddingLeft: \"$2\", fontWeight: 700, color: \"$neutral-2\" }}\n        >\n          Powered by Rollout\n        </st.span>\n      </st.div>\n\n      <st.div css={{ marginTop: \"$2\", fontSize: \"8px\", color: \"$grayMedium\" }}>\n        By automating, you agree to Rollout's{\" \"}\n        <st.a\n          href=\"https://docs.rollouthq.com/security-and-legal/security\"\n          css={{ color: \"black\", textDecoration: \"underline\" }}\n        >\n          Terms\n        </st.a>{\" \"}\n        &amp;{\" \"}\n        <st.a\n          href=\"https://docs.rollouthq.com/security-and-legal/privacy-policy\"\n          css={{ color: \"black\", textDecoration: \"underline\" }}\n        >\n          Privacy policy\n        </st.a>\n      </st.div>\n    </st.div>\n  );\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nexport * from './SSRProvider';\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n// We must avoid a circular dependency with @react-aria/utils, and this useLayoutEffect is\n// guarded by a check that it only runs on the client side.\n// eslint-disable-next-line rulesdir/useLayoutEffectRule\nimport React, {ReactNode, useContext, useLayoutEffect, useMemo, useState} from 'react';\n\n// To support SSR, the auto incrementing id counter is stored in a context. This allows\n// it to be reset on every request to ensure the client and server are consistent.\n// There is also a prefix string that is used to support async loading components\n// Each async boundary must be wrapped in an SSR provider, which appends to the prefix\n// and resets the current id counter. This ensures that async loaded components have\n// consistent ids regardless of the loading order.\ninterface SSRContextValue {\n  prefix: string,\n  current: number\n}\n\n// Default context value to use in case there is no SSRProvider. This is fine for\n// client-only apps. In order to support multiple copies of React Aria potentially\n// being on the page at once, the prefix is set to a random number. SSRProvider\n// will reset this to zero for consistency between server and client, so in the\n// SSR case multiple copies of React Aria is not supported.\nconst defaultContext: SSRContextValue = {\n  prefix: String(Math.round(Math.random() * 10000000000)),\n  current: 0\n};\n\nconst SSRContext = React.createContext<SSRContextValue>(defaultContext);\n\ninterface SSRProviderProps {\n  /** Your application here. */\n  children: ReactNode\n}\n\n/**\n * When using SSR with React Aria, applications must be wrapped in an SSRProvider.\n * This ensures that auto generated ids are consistent between the client and server.\n */\nexport function SSRProvider(props: SSRProviderProps): JSX.Element {\n  let cur = useContext(SSRContext);\n  let value: SSRContextValue = useMemo(() => ({\n    // If this is the first SSRProvider, start with an empty string prefix, otherwise\n    // append and increment the counter.\n    prefix: cur === defaultContext ? '' : `${cur.prefix}-${++cur.current}`,\n    current: 0\n  }), [cur]);\n\n  return (\n    <SSRContext.Provider value={value}>\n      {props.children}\n    </SSRContext.Provider>\n  );\n}\n\nlet canUseDOM = Boolean(\n  typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement\n);\n\n/** @private */\nexport function useSSRSafeId(defaultId?: string): string {\n  let ctx = useContext(SSRContext);\n\n  // If we are rendering in a non-DOM environment, and there's no SSRProvider,\n  // provide a warning to hint to the developer to add one.\n  if (ctx === defaultContext && !canUseDOM) {\n    console.warn('When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.');\n  }\n\n  return useMemo(() => defaultId || `react-aria${ctx.prefix}-${++ctx.current}`, [defaultId]);\n}\n\n/**\n * Returns whether the component is currently being server side rendered or\n * hydrated on the client. Can be used to delay browser-specific rendering\n * until after hydration.\n */\nexport function useIsSSR(): boolean {\n  let cur = useContext(SSRContext);\n  let isInSSRContext = cur !== defaultContext;\n  let [isSSR, setIsSSR] = useState(isInSSRContext);\n\n  // If on the client, and the component was initially server rendered,\n  // then schedule a layout effect to update the component after hydration.\n  if (typeof window !== 'undefined' && isInSSRContext) {\n    // This if statement technically breaks the rules of hooks, but is safe\n    // because the condition never changes after mounting.\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useLayoutEffect(() => {\n      setIsSSR(false);\n    }, []);\n  }\n\n  return isSSR;\n}\n","import { SSRProvider } from \"@react-aria/ssr\";\nimport {\n  BrowserClient,\n  defaultIntegrations,\n  defaultStackParser,\n  makeFetchTransport,\n} from \"@sentry/browser\";\nimport React, { useCallback, useState } from \"react\";\nimport { ReactElement } from \"react\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nimport { RolloutAPIClientProvider } from \"@rollouthq/api-client-react\";\nimport { ErrorFallback } from \"@rollouthq/connect-react/components/error-fallback\";\nimport {\n  AnyAppSlug,\n  RolloutAllowedAppsContextProvider,\n} from \"@rollouthq/connect-react/contexts/allowed-apps-context\";\nimport { RolloutApiBaseUrlContextProvider } from \"@rollouthq/connect-react/contexts/api-base-url-context\";\nimport { RolloutAppKeyProvider } from \"@rollouthq/connect-react/contexts/end-user-context\";\n\nconst ROLLOUT_API_BASE_URL = \"https://app.rollouthq.com/api\";\nconst SENTRY_DSN =\n  \"https://28e3dd4b02f14f2eb74768520edbc8a1@o345148.ingest.sentry.io/6463365\";\n\nexport type RolloutConnectProviderProps = {\n  token: string | (() => Promise<string> | string);\n  onError?: (error: Error, info: { componentStack: string }) => void;\n  apiBaseUrl?: string | undefined;\n  allowedApps?: AnyAppSlug[];\n  children: ReactElement;\n  env?: string;\n};\n\nexport function RolloutConnectProvider(props: RolloutConnectProviderProps) {\n  const {\n    token,\n    allowedApps,\n    apiBaseUrl = ROLLOUT_API_BASE_URL,\n    children,\n    env = \"production\",\n    onError: onErrorProp,\n  } = props;\n\n  const [sentry] = useState(() => {\n    return new BrowserClient({\n      dsn: SENTRY_DSN,\n      transport: makeFetchTransport,\n      stackParser: defaultStackParser,\n      integrations: defaultIntegrations,\n    });\n  });\n\n  const onError = useCallback(\n    (error: Error, info: React.ErrorInfo) => {\n      onErrorProp?.(error, info);\n\n      if (env === \"production\") {\n        sentry.captureException(error, {\n          data: { info },\n        });\n      }\n    },\n    [env, sentry, onErrorProp]\n  );\n\n  return (\n    <ErrorBoundary FallbackComponent={ErrorFallback} onError={onError}>\n      <RolloutApiBaseUrlContextProvider apiBaseUrl={apiBaseUrl}>\n        <RolloutAllowedAppsContextProvider allowedApps={allowedApps}>\n          <RolloutAPIClientProvider\n            token={token}\n            apiBaseUrl={apiBaseUrl ?? ROLLOUT_API_BASE_URL}\n          >\n            <RolloutAppKeyProvider>\n              <SSRProvider>{children}</SSRProvider>\n            </RolloutAppKeyProvider>\n          </RolloutAPIClientProvider>\n        </RolloutAllowedAppsContextProvider>\n      </RolloutApiBaseUrlContextProvider>\n    </ErrorBoundary>\n  );\n}\n","import React from \"react\";\n\nimport { Gear } from \"@rollouthq/ui\";\nimport { RedQuestion } from \"@rollouthq/ui\";\n\nexport function ErrorFallback() {\n  return (\n    <div className=\"rollout-error-fallback__container\">\n      <div>\n        <Gear\n          style={{\n            width: \"40px\",\n            height: \"40px\",\n          }}\n        />\n        <RedQuestion\n          style={{\n            position: \"relative\",\n            right: \"10px\",\n            bottom: \"30px\",\n          }}\n        />\n      </div>\n      <div className=\"rollout-error-fallback__text-container\">\n        <div className=\"rollout-error-fallback__message\">\n          An unexpected error occured\n        </div>\n        <div className=\"rollout-error-fallback__additional-info\">\n          Please try again later\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { CSS, globalCss } from \"@rollouthq/ui\";\n\nconst card: CSS = {\n  border: \"1px solid #D5DCE2\",\n  borderRadius: \"8px\",\n  padding: \"16px\",\n  marginTop: \"24px\",\n  background: \"white\",\n};\n\nexport const defaultTheme = globalCss({\n  \".rollout-automation-form__line-items-container\": {\n    border: \"1px solid #DFE1E4\",\n    borderRadius: \"8px\",\n  },\n  \".rollout-automation-form__line-items-header\": {\n    padding: \"12px\",\n    display: \"flex\",\n    gap: \"12px\",\n    alignItems: \"flex-start\",\n    flexDirection: \"column\",\n    background:\n      \"linear-gradient(180deg, rgba(255, 255, 255, 0.03) 0%, rgba(0, 0, 0, 0.03) 100%), #FFFFFF\",\n  },\n  \".rollout-automation-form__line_items-description\": {\n    fontSize: \"13px\",\n  },\n  \".rollout-automation-form__line-items-title\": {\n    fontSize: \"13px\",\n    fontWeight: \"600\",\n  },\n  \".rollout-automation-form__line-items-content\": {\n    padding: \"16px\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"16px\",\n  },\n\n  \".rollout-automations-list__container\": {\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n\n  \".rollout-automations-list__header\": {\n    display: \"flex\",\n    paddingY: \"16px\",\n    marginBottom: \"16px\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    borderBottom: \"1px solid #EFF1F4\",\n  },\n\n  \".rollout-automations-list__header-title\": {\n    fontWeight: \"600\",\n  },\n\n  \".rollout-error-fallback__container\": {\n    boxSizing: \"border-box\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: \"32px\",\n    gap: \"16px\",\n    margin: \"24px auto\",\n    width: \"572px\",\n    height: \"173px\",\n\n    border: \"1px solid #D5DCE2\",\n    borderRadius: \"8px\",\n  },\n\n  \".rollout-error-fallback__text-container\": {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    gap: \"4px\",\n    width: \"227px\",\n    height: \"48px\",\n  },\n\n  \".rollout-error-fallback__message\": {\n    color: \"#6C6F75\",\n    fontFamily: \"Inter\",\n    fontStyle: \"normal\",\n    fontWeight: \"600\",\n    fontSize: \"16px\",\n    lineHeight: \"150%\",\n  },\n\n  \".rollout-error-fallback__additional-info\": {\n    color: \"#6C6F75\",\n    fontFamily: \"Inter\",\n    fontStyle: \"normal\",\n    fontweight: \"500\",\n    fontSize: \"13px\",\n    lineHeight: \"150%\",\n  },\n\n  \".rollout-combobox__input__spinner\": {\n    width: \"1rem\",\n    height: \"1rem\",\n  },\n\n  \".rollout-combobox__input\": {\n    width: \"100%\",\n    paddingX: \"$2\",\n    paddingY: \"$2-5\",\n    background: \"none\",\n    outline: \"none\",\n    border: \"none\",\n    cursor: \"text\",\n    paddingRight: \"40px\",\n    fontSize: \"13px\",\n\n    \"&:focus\": {\n      borderColor: \"$interactPrimary\",\n    },\n\n    \"[data-disabled]\": {\n      opacity: 0.4,\n      cursor: \"not-allowed\",\n    },\n\n    \".rollout-combobox__input__left-element[data-icon] ~ &\": {\n      paddingLeft: \"40px\",\n    },\n\n    \"&:disabled\": { cursor: \"not-allowed\" },\n  },\n\n  \".rollout-select__tag\": {\n    margin: \"2px\",\n    paddingX: \"6px\",\n    paddingY: \"1px\",\n    height: \"fit-content\",\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: \"4px\",\n    background: \"white\",\n    border: \"1px solid #EFF1F4\",\n    borderRadius: \"4px\",\n    fontWeight: \"500\",\n    cursor: \"pointer\",\n    whiteSpace: \"nowrap\",\n  },\n\n  \".rollout-select__tag-icon\": {\n    color: \"#91959C\",\n    \"&:hover\": {\n      color: \"black\",\n    },\n  },\n\n  \".rollout-select__input\": {\n    background: \"none\",\n    outline: \"none\",\n    border: \"none\",\n    width: \"100%\",\n    \"&:disabled\": { cursor: \"not-allowed\" },\n  },\n\n  \".rollout-select__input__group\": {\n    background: \"#F8F9FB\",\n    height: \"36px\",\n    paddingX: \"8px\",\n    \".rollout-select__input\": {\n      paddingLeft: \"0\",\n    },\n  },\n\n  \".rollout-form-control__input[data-error]\": {\n    \".rollout-combobox__input__group, .rollout-select__input__group, .rollout__base-input\":\n      {\n        borderColor: \"$error\",\n      },\n  },\n\n  \".rollout-combobox__input__group, .rollout-select__input__group\": {\n    position: \"relative\",\n    overflow: \"hidden\",\n    display: \"flex\",\n    alignItems: \"center\",\n    fontSize: \"13px\",\n    outline: \"none\",\n    overflowX: \"hidden\",\n    borderWidth: \"1px\",\n    borderRadius: \"$md\",\n    borderStyle: \"solid\",\n    borderColor: \"$strokeMedium\",\n    \"&[data-focused]\": {\n      borderColor: \"$interactPrimary\",\n    },\n    \"&[data-disabled]\": {\n      cursor: \"not-allowed\",\n      color: \"$grayMedium\",\n      backgroundColor: \"$surfaceSecondary\",\n    },\n  },\n\n  \".rollout-connect-combobox__label, .rollout-connect-select__label\": {\n    marginBottom: \"$2\",\n    span: {\n      color: \"$primary\",\n    },\n  },\n\n  \".rollout-combobox__input__left-element, .rollout-combobox__input__right-element\":\n    {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      position: \"absolute\",\n      \"&:not([data-open])\": {\n        pointerEvents: \"none\",\n      },\n      \"&[data-open]\": {\n        cursor: \"pointer\",\n      },\n      top: \"50%\",\n      transform: \"translateY(-50%)\",\n      zIndex: 2,\n      color: \"#91959C\",\n      border: \"none\",\n      background: \"none\",\n    },\n\n  \".rollout-combobox__input__left-element\": {\n    size: \"24px\",\n    left: \"8px\",\n    \"&:not([data-icon])\": {\n      display: \"none\",\n    },\n    \"[data-avatar][data-selected] &\": {\n      background: \"transparent\",\n      border: \"none\",\n      color: \"white\",\n      fontSize: \"$1\",\n    },\n    borderWidth: \"1px\",\n    borderColor: \"#EFF1F4\",\n    borderStyle: \"solid\",\n    borderRadius: \"6px\",\n    background: \"white\",\n  },\n  \".rollout-combobox__input__right-element, .rollout-select__input__right-element\":\n    {\n      size: \"16px\",\n      right: \"8px\",\n    },\n  \".rollout-combobox__input__spinner, .rollout-select__input__spinner\": {\n    flexShrink: \"0\",\n    size: \"12px\",\n  },\n\n  \".rollout-combobox__content, .rollout-select__content\": {\n    maxHeight: \"288px\",\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n    outline: \"none\",\n    border: \"solid 1px\",\n    borderColor: \"#D5DCE2\",\n    borderRadius: \"8px\",\n\n    \".rollout-tab__list\": {\n      background: \"#282A2F\",\n      padding: \"10px 12px\",\n      fontSize: \"13px\",\n      color: \"white\",\n      fontWeight: \"600\",\n      gap: \"16px\",\n      border: \"none\",\n    },\n\n    \".rollout-tabs__tab\": {\n      overflowX: \"hidden !important\",\n      padding: \"0\",\n      border: \"none\",\n      color: \"white\",\n      opacity: \"0.4\",\n      \"&[data-selected]\": {\n        opacity: \"1\",\n      },\n    },\n  },\n\n  \".rollout-select__multiple-alert\": {\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: \"8px\",\n    paddingX: \"12px\",\n    paddingY: \"8px\",\n    background: \"#5386F6\",\n    color: \"white\",\n    span: {\n      fontSize: \"13px\",\n      fontWeight: \"500\",\n    },\n  },\n\n  \".rollout-combobox__content ul\": {\n    margin: \"0px\",\n    padding: \"0px\",\n  },\n\n  \".rollout-select__content ul\": {\n    margin: \"0px\",\n    padding: \"0px\",\n  },\n\n  \".rollout-select__option-check__icon\": {\n    marginLeft: \"auto\",\n  },\n\n  \".rollout-listbox\": {\n    width: \"100%\",\n    margin: 0,\n    padding: 0,\n  },\n\n  \".rollout-listbox__option, .rollout-select__option\": {\n    display: \"flex\",\n    alignItems: \"center\",\n    padding: \"$2\",\n    fontSize: \"$2\",\n    outline: \"none\",\n    cursor: \"pointer\",\n    borderBottom: \"solid 1px\",\n    borderColor: \"#F8F9FB\",\n    \"&[data-focused]\": {\n      background: \"#F4F5F8\",\n    },\n    \"&[data-disabled]\": {\n      fontWeight: \"500\",\n      color: \"#91959C\",\n    },\n    \"&[data-selected]\": {\n      fontWeight: \"500\",\n      color: \"#5284F2\",\n      diaplay: \"flex\",\n      alignItems: \"center\",\n    },\n  },\n\n  \".rollout-listbox__option-icon\": {\n    \"[data-avatar] &\": {\n      background: \"#C3C7CE;\",\n      color: \"white\",\n      border: \"none\",\n      borderRadius: \"100%\",\n      padding: 0,\n      fontSize: \"$1\",\n    },\n    borderWidth: \"1px\",\n    borderColor: \"$strokeMedium\",\n    borderStyle: \"solid\",\n    borderRadius: \"$md\",\n    background: \"white\",\n    size: \"$6\",\n    padding: \"$1\",\n    marginRight: \"$1-5\",\n  },\n\n  \".rollout-automations-list__search-input\": {\n    paddingX: \"40px\",\n    paddingY: \"10px\",\n    borderRadius: \"$md\",\n    outline: \"none\",\n    borderWidth: \"2px\",\n    borderColor: \"#EFF1F4\",\n    \"&:focus\": {\n      borderColor: \"$interactPrimary\",\n    },\n    borderStyle: \"solid\",\n    background: \"#F8F9FB\",\n  },\n\n  \".rollout-automations-list__search-input__group\": {\n    position: \"relative\",\n    display: \"flex\",\n    marginBottom: \"$4\",\n    color: \"#91959C\",\n  },\n\n  \".rollout-automations-list__search-input__left-element\": {\n    position: \"absolute\",\n    left: \"0px\",\n    top: \"0px\",\n    zIndex: 2,\n    display: \"flex\",\n    size: \"40px\",\n    fontSize: \"$md\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    pointerEvents: \"none\",\n    svg: {\n      size: \"20px\",\n    },\n  },\n\n  \".rollout-automations-list__not-found\": {\n    paddingInlineStart: \"$4\",\n  },\n\n  \".rollout-form-control-find__container\": {\n    display: \"flex\",\n    background: \"#e0e1e4\",\n    width: \"max-content\",\n    borderRadius: \"6px\",\n  },\n\n  \".rollout-form-control-find__active\": {\n    color: \"#5d88ef\",\n    fontSize: \"0.8125rem\",\n    fontFamily: \"inherit\",\n    fontWeight: \"500\",\n    padding: \"4px 36px\",\n    whiteSpace: \"nowrap\",\n    background: \"white\",\n    height: \"32px\",\n    cursor: \"pointer\",\n    borderRadius: \"8px\",\n    border: \"1px solid #e0e1e4\",\n  },\n\n  \".rollout-form-control-find__disabled\": {\n    color: \"#6c6f75\",\n    fontFamily: \"inherit\",\n    fontSize: \"0.8125rem\",\n    fontWeight: \"500\",\n    padding: \"4px 36px\",\n    whiteSpace: \"nowrap\",\n    background: \"e0e0e5\",\n    height: \"32px\",\n    cursor: \"pointer\",\n    borderRadius: \"8px\",\n  },\n\n  \".rollout-automations-list__new-btn\": {\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: \"8px\",\n    padding: \"4px 12px\",\n    whiteSpace: \"nowrap\",\n    backgroundColor: \"#5386F7\",\n    color: \"white\",\n    border: \"none\",\n    borderRadius: \"8px\",\n    height: \"32px\",\n    cursor: \"pointer\",\n  },\n\n  \".rollout-automations-list__empty-msg\": {\n    textAlign: \"center\",\n    padding: \"20px\",\n    border: \"1px solid #eff1f4\",\n    borderRadius: \"4px\",\n  },\n\n  \".rollout-automations-list__error-msg\": {\n    textAlign: \"center\",\n    padding: \"20px\",\n    border: \"1px dashed #AA4849\",\n    borderRadius: \"4px\",\n  },\n\n  \".rollout-automations-list__list\": {\n    display: \"grid\",\n    gap: \"16px\",\n    gridTemplateColumns: \"repeat(auto-fill, minmax(250px, 1fr))\",\n  },\n\n  \".rollout-automations-list__item-wrapper\": {\n    position: \"relative\",\n    marginBottom: \"8px\",\n    maxWidth: \"343px\",\n    border: \"1px solid #D5DCE2\",\n    borderRadius: \"8px\",\n    \"&:hover\": {\n      border: \"1px solid #ADB4BA\",\n    },\n    \"&[data-deleting]\": {\n      opacity: 0.4,\n    },\n    \"&[data-deleting]::after\": {\n      content: \"''\",\n      position: \"absolute\",\n      inset: 0,\n      userSelect: \"none\",\n      cursor: \"wait\",\n    },\n  },\n\n  \".rollout-automations-list__item\": {\n    padding: \"16px\",\n    cursor: \"pointer\",\n  },\n\n  \".rollout-automations-list-item__header\": {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n  },\n\n  \".rollout-automations-list-item__draft-badge\": {\n    marginLeft: \"auto\",\n    marginRight: \"10px\",\n    padding: \"4px 8px\",\n    borderRadius: \"40px\",\n    background: \"$neutral-4\",\n    fontSize: \"small\",\n    color: \"white\",\n  },\n\n  \".rollout-automations-list-item__icons\": {\n    display: \"inline-flex\",\n    \".rollout-automations-list-item__trigger, .rollout-automations-list-item__action\":\n      {\n        padding: \"$1\",\n        borderStyle: \"solid\",\n        borderWidth: \"1px\",\n        borderColor: \"$strokeMedium\",\n        borderRadius: \"$md\",\n        fontSize: \"24px\",\n      },\n    \":first-child\": {\n      borderStartEndRadius: \"unset\",\n      borderEndEndRadius: \"unset\",\n      marginRight: \"-1px\",\n    },\n    \":last-child\": {\n      borderStartStartRadius: \"unset\",\n      borderEndStartRadius: \"unset\",\n    },\n    size: \"fit-content\",\n  },\n\n  \".rollout-automations-list-item__name\": {\n    marginTop: \"12px\",\n    fontSize: \"16px\",\n    fontWeight: \"600\",\n    color: \"#31373F\",\n    height: \"72px\",\n  },\n\n  \".rollout-automations-list-item__options__trigger\": {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: \"4px\",\n    cursor: \"pointer\",\n    color: \"#91959C\",\n    transition: \"all .2s ease\",\n    size: \"32px\",\n    svg: {\n      size: \"16px\",\n    },\n    \"&:hover\": {\n      bg: \"rgba(219, 97, 92, 0.1)\",\n      color: \"#DB615C\",\n    },\n    opacity: 0,\n    '[role=\"group\"]:hover:not([data-open]) &': {\n      opacity: 1,\n    },\n  },\n\n  \".rollout-automations-list-item__options__content\": {\n    position: \"absolute\",\n    padding: \"18px 16px\",\n    inset: \"0\",\n    background: \"white\",\n    borderRadius: \"8px\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"12px\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    span: {\n      fontWeight: \"600\",\n    },\n  },\n\n  \".rollout-automations-list-item__options__delete-item-btn\": {\n    background: \"#DB615C\",\n    color: \"white\",\n    whiteSpace: \"nowrap\",\n    \"&:hover\": {\n      background: \"#C74D48\",\n    },\n    cursor: \"pointer\",\n  },\n\n  \".rollout-automations-list-item__options__cancel-item-btn\": {\n    border: \"1px solid #282A2F\",\n    cursor: \"pointer\",\n  },\n\n  \".rollout-automations-manager__navbar\": {\n    paddingY: \"$3\",\n  },\n\n  \".rollout-automations-manager__back-btn\": {\n    border: \"none\",\n    background: \"none\",\n  },\n\n  \".rollout-automation-form__header-back__arrow\": {\n    cursor: \"pointer\",\n  },\n\n  \".rollout-automations-list-item__options__content button\": {\n    fonSize: \"13px\",\n    fontWeight: \"500\",\n    borderRadius: \"8px\",\n    height: \"32px\",\n    width: \"100%\",\n    cursor: \"pointer\",\n    transition: \"all .2s ease\",\n  },\n\n  \".rollout-automation-form__name\": {\n    height: \"36px\",\n    fontWeight: 500,\n    fontSize: \"13px\",\n    background: \"none\",\n    border: \"1px solid\",\n    borderColor: \"$strokeDark\",\n    borderRadius: \"8px\",\n    paddingX: \"$4\",\n    paddingY: \"$2-5\",\n    outline: \"none\",\n\n    \"&[aria-invalid]::placeholder\": {\n      color: \"$error\",\n    },\n  },\n\n  \".rollout-automation-form__action-inputs-wrapper, .rollout-automation-form__trigger-inputs-wrapper\":\n    {\n      display: \"flex\",\n      flexDirection: \"column\",\n      gap: \"$3\",\n    },\n\n  \".rollout-automation-form__trigger\": {\n    ...card,\n  },\n\n  \".rollout-automation-form__trigger-inputs\": {\n    ...card,\n  },\n\n  \".rollout-automation-form__action\": {\n    ...card,\n  },\n\n  \".rollout-automation-form__action-inputs\": {\n    ...card,\n  },\n\n  \".rollout-automation-form__trigger-trigger\": {\n    marginBottom: \"$3\",\n  },\n\n  \".rollout-automation-form__trigger .rollout-automation-form__trigger-app \": {\n    marginBottom: \"$3\",\n  },\n\n  \".rollout-automation-form__trigger .rollout-automation-form__credentials\": {\n    marginTop: \"$3\",\n  },\n\n  \".rollout-automation-form__action .rollout-automation-form__action-app\": {\n    marginBottom: \"$3\",\n  },\n\n  \".rollout-automation-form__action .rollout-automation-form__action-action\": {\n    marginBottom: \"$3\",\n  },\n\n  \".rollout-automation-form__credential\": {\n    marginBottom: \"$3\",\n  },\n\n  \".rollout-automation-form__label\": {\n    fontWeight: \"600\",\n    marginBottom: \"12px\",\n  },\n\n  \".rollout-automation-form__helper-text\": {\n    marginBottom: \"12px\",\n  },\n\n  \".rollout-automation-form__content\": {\n    marginBottom: \"16px\",\n  },\n\n  \".rollout-automation-form-oauth__error__message\": {\n    marginTop: \"4px\",\n    fontSize: \"$2\",\n    color: \"$error\",\n  },\n\n  \".rollout-input\": {\n    height: \"36px\",\n    paddingX: \"$2\",\n    paddingY: \"$2-5\",\n    border: \"1px solid\",\n    borderColor: \"$strokeMedium\",\n    borderRadius: \"6px\",\n  },\n\n  \".rollout-button--primary, .rollout-button--secondary, .rollout-button--danger\":\n    {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      gap: \"8px\",\n      height: \"32px\",\n      padding: \"4px 12px\",\n      fontWeight: 600,\n      whiteSpace: \"nowrap\",\n      textAlign: \"center\",\n      border: \"1px solid\",\n      borderRadius: \"8px\",\n    },\n\n  \".rollout-button--primary\": {\n    backgroundColor: \"#5386F7\",\n    borderColor: \"#5386F7\",\n    color: \"white\",\n  },\n\n  \".rollout-button--secondary\": {\n    backgroundColor: \"$grayMedium\",\n    borderColor: \"$grayMedium\",\n    color: \"white\",\n  },\n\n  \".rollout-button--danger\": {\n    color: \"white\",\n    backgroundColor: \"$error\",\n    borderColor: \"$error\",\n    \"&:hover\": {\n      backgroundColor: \"#A92F2A\",\n      borderColor: \"#A92F2A\",\n    },\n  },\n\n  \".rollout-automation-form__buttons\": {\n    display: \"flex\",\n    gap: \"$3\",\n  },\n\n  \".rollout-automation-form__cancel\": {\n    marginLeft: \"auto\",\n  },\n\n  \".rollout-automation-form__delete\": {\n    position: \"relative\",\n    marginLeft: \"auto\",\n\n    \".rollout-automation-form__cancel ~ &\": {\n      marginLeft: \"0\",\n    },\n  },\n\n  \".rollout-automation-form-delete__confirm-dialog\": {\n    position: \"absolute\",\n    bottom: \"100%\",\n    right: \"0\",\n    whiteSpace: \"nowrap\",\n    background: \"white\",\n    marginBottom: \"12px\",\n    padding: \"12px\",\n    border: \"1px solid #F8F9FB\",\n    borderRadius: \"8px\",\n    boxShadow: \"0px 4px 16px rgba(0, 0, 0, 0.2)\",\n  },\n\n  \".rollout-automation-form__delete-confirm-text\": {\n    padding: \"$3\",\n    fontSize: \"$2\",\n    fontWeight: 500,\n  },\n\n  \".rollout-automation-form__delete-confirm-buttons\": {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    gap: \"$3\",\n    marginTop: \"$4\",\n  },\n\n  \".rollout-automation-form__delete-cancel, .rollout-automation-form__delete-confirm\":\n    {\n      width: \"100%\",\n    },\n\n  \".rollout-automation-form__submit[disabled], .rollout-automation-form__submit[data-loading]\":\n    {\n      opacity: 0.3,\n    },\n\n  \".rollout-form-control__label\": {\n    marginBottom: \"8px\",\n    fontSize: \"$2\",\n    fontWeight: 500,\n    display: \"flex\",\n    alignItems: \"center\",\n  },\n\n  \".rollout-form-control__lock-btn\": {\n    marginLeft: \"auto\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    border: \"1px solid #EFF1F4\",\n    size: \"20px\",\n    cursor: \"pointer\",\n    borderRadius: \"4px\",\n    boxShadow: \"$md\",\n    color: \"#91959C\",\n    transition: \"all .2s ease\",\n    \"&[data-locked]\": {\n      color: \"#9A58F6\",\n    },\n    \"&:hover\": {\n      background: \"#F8F9FB\",\n    },\n    svg: {\n      height: \"14px\",\n    },\n  },\n\n  \".rollout-form-control__required-hint\": {\n    paddingLeft: \"4px\",\n    color: \"$primary\",\n  },\n\n  \".rollout-form-control__description\": {\n    marginBottom: \"8px\",\n    fontSize: \"13px\",\n  },\n\n  \".rollout-form-control__error\": {\n    marginTop: \"4px\",\n    fontSize: \"$2\",\n    color: \"$error\",\n  },\n\n  \".rollout-automation-form__api-token-input\": {\n    height: \"32px\",\n    marginTop: \"$2\",\n    marginBottom: \"$4\",\n    background: \"#F8F9FB\",\n    border: \"1px solid #EFF1F4\",\n    borderRadius: \"4px\",\n    paddingX: \"8px\",\n    \"&:focus\": {\n      background: \"white\",\n    },\n  },\n\n  \".rollout-automation-form__api-token-input-info\": {\n    fontSize: \"0.75rem\",\n    marginBottom: \"$1-5\",\n    color: \"#6C6F75\",\n  },\n\n  \".rollout-automation-form__api-token-input-label\": {\n    fontSize: \"$2\",\n    marginTop: \"$1-5\",\n  },\n\n  \".rollout-automation-form__api-token-input-container\": {\n    marginTop: \"$2\",\n  },\n\n  \".rollout-automation-form__api-token-connection-result\": {\n    fontSize: \".85rem\",\n  },\n\n  \".rollout-automation-form__api-token-apitoken-button-container\": {\n    display: \"flex\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\",\n    gap: \"$2-5\",\n  },\n\n  // BlueprintActivator\n  \".rollout-blueprint-activator__header\": {\n    display: \"flex\",\n    alignItems: \"center\",\n    borderBottom: \"1px solid\",\n    borderBottomColor: \"$strokeMedium\",\n    paddingY: \"12px\",\n  },\n\n  \".rollout-blueprint-activator__name\": {\n    marginLeft: \"16px\",\n  },\n\n  \".rollout-blueprint-activator__label\": {\n    padding: \"12px\",\n    fontSize: \"$3\",\n    fontWeight: \"bold\",\n    borderBottom: \"1px solid\",\n    borderBottomColor: \"$strokeMedium\",\n  },\n\n  \".rollout-blueprint-activator__trigger\": {\n    marginTop: \"12px\",\n    border: \"1px solid\",\n    borderColor: \"$strokeMedium\",\n    borderRadius: \"8px\",\n\n    \"& .rollout-automation-form__credentials\": {\n      marginBottom: \"$3\",\n    },\n  },\n\n  \".rollout-blueprint-activator__trigger__fields\": {\n    padding: \"12px\",\n  },\n\n  \".rollout-blueprint-activator__activate-btn, .rollout-blueprint-activator__deactivate-btn\":\n    {\n      marginTop: \"12px\",\n    },\n  //\n\n  \".rollout__loading_spinner_container\": {\n    padding: \"1rem\",\n    display: \"flex\",\n    justifyContent: \"center\",\n  },\n\n  \".rollout__loading_spinner\": {\n    height: \"1rem\",\n    width: \"1rem\",\n  },\n\n  \".rollout__base-input\": {\n    background: \"#F8F9FB\",\n    border: \"1px solid #EFF1F4\",\n    borderRadius: \"4px\",\n    paddingX: \"8px\",\n    \"&:focus\": {\n      background: \"white\",\n    },\n  },\n\n  \"input.rollout__base-input, select.rollout__base-input\": {\n    height: \"32px\",\n  },\n\n  \".rollout__terms-of-service-link, .rollout__privacy-policy-link\": {\n    color: \"#31373F\",\n    textDecoration: \"underline\",\n    \"&:hover\": {\n      color: \"#1e2227\",\n    },\n  },\n\n  \".ace_editor\": {\n    backgroundColor: \"$surfaceSecondary\",\n  },\n\n  \".rollout-card\": {\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"12px\",\n    marginTop: \"12px\",\n    padding: \"16px\",\n    border: \"1px solid #d5dce2\",\n    borderRadius: \"8px\",\n  },\n});\n"],"mappings":"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","names":["src_exports","__export","AutomationCreator","AutomationEditor","AutomationsManager","BlueprintActivator","BlueprintsList","BlueprintsManager","MyAutomations","MyBlueprints","PoweredByRollout","RolloutConnectProvider","components_exports","defaultTheme","__toCommonJS","components_exports","__export","AutomationCreator","AutomationEditor","AutomationsManager","BlueprintActivator","BlueprintsList","BlueprintsManager","MyAutomations","MyBlueprints","PoweredByRollout","RolloutConnectProvider","import_react","import_api_client_react","import_react","import_spin_delay","import_api_client_react","import_common","import_react","import_common","action_inputs_exports","__export","BooleanInput","DropdownInput","FindBy","MultiSelectInput","NoInputsComponent","RichTextInput","import_react","import_common","import_react","import_ui","AppComponentRendererContextProvider","useAppComponentRendererContext","import_react","import_ts_object_path","import_common","import_ts_object_path","import_zod","getAutomationInputParamSchema","inputParamsSchema","bind","bindPath","getByPath","schema","path","restPath","unwrappedType","prop","useAutomationInputParam","bind","ctx","useAppComponentRendererContext","inputParams","setInputParams","importedData","credentialId","isBlueprintActivation","path","value","setValue","newValue","newInputParams","inputParamsSchema","schema","getAutomationInputParamSchema","isOptional","meta","label","pathToLabel","description","isCredentialDependent","validation","error","getAutomationInputParamValidation","err","prop","camelCaseToSpaceSeparated","str","spaceSeparated","char","import_react","import_ui","StyledInputFormControl","props","label","description","error","isRequired","children","React","import_ui","ActionInputFormControl","props","bind","children","description","error","isRequired","credentialId","isBlueprintActivation","useAppComponentRendererContext","param","useAutomationInputParam","isProvidedByUserPlaceholder","getChildren","React","label","StyledInputFormControl","import_react","import_react","Card","props","React","renderField","opts","DefaultField","ctx","renderer","React","Card","import_ui","FormContextProvider","useFormContext","import_ui","DropdownInputContextProvider","useDropdownInputContext","DropdownInput","props","paramName","useAutomationInputParam","renderParams","useAppComponentRendererContext","field","renderField","DropdownInputField","React","_a","ctx","bind","dependencies","fetchOptions","allowOnlyVariables","param","value","setValue","label","description","placeholder","options","setOptions","isLoadingOptions","setIsLoadingOptions","shouldShowErrors","useFormContext","variables","disabledFromContext","disabled","refetch","dropDownOptions","variableOptions","v","allOptions","selectedOption","opt","variableOptionsDisplay","newItem","allVariableOptionsDisplay","optionsDisplay","ActionInputFormControl","import_react","FindBy","props","_a","filterInput","filterValueInput","selectInput","bind","param","useAutomationInputParam","shouldShowErrors","useFormContext","value","setValue","isOptional","label","description","React","ActionInputFormControl","import_react","import_common","import_ui","RichTextInputContextProvider","useRichTextInputContext","RichTextInput","props","paramName","useAutomationInputParam","renderParams","useAppComponentRendererContext","field","renderField","RichTextInputField","React","_a","ctx","bind","inputProps","placeholder","param","label","description","appComponentRendererCtx","variables","shouldShowErrors","useFormContext","disabled","isRequired","setValue","val","resolvedValue","ActionInputFormControl","import_react","import_ui","MultiSelectInputContextProvider","useMultiSelectInputContext","MultiSelectInput","props","paramName","useAutomationInputParam","renderParams","useAppComponentRendererContext","field","renderField","MultiSelectInputField","React","_a","ctx","bind","dependencies","fetchOptions","placeholder","param","appComponentRendererCtx","value","setValue","label","description","disabled","options","setOptions","isLoadingOptions","setIsLoadingOptions","shouldShowErrors","useFormContext","getOptions","dropDownOptions","ActionInputFormControl","items","i","import_react","import_ui","BooleanInputContextProvider","useBooleanInputContext","BooleanInput","props","paramName","useAutomationInputParam","renderParams","useAppComponentRendererContext","field","renderField","BooleanInputField","React","_a","ctx","bind","param","shouldShowErrors","useFormContext","disabled","value","setValue","isOptional","label","description","ActionInputFormControl","e","import_react","NoInputsComponent","React","import_react","import_ui","_RolloutApiBaseUrlContextProvider","useRolloutApiBaseUrlContext","RolloutApiBaseUrlContextProvider","props","children","ctxProps","ctx","React","_RolloutApiBaseUrlContextProvider","useSafeLayoutEffect","useTriggerRendererData","opts","apiBaseUrl","useRolloutApiBaseUrlContext","triggerRendererData","setTriggerRendererData","React","action_inputs_exports","importPath","data","import_react","import_ui","_RolloutAllowedAppsContextProvider","useRolloutAllowedAppsContext","RolloutAllowedAppsContextProvider","props","children","ctxProps","ctx","React","_RolloutAllowedAppsContextProvider","import_react","import_api_client_react","useActionsQuery","action","actions","import_api_client_react","useAppsQuery","opts","allowedApps","appsList","a","import_assert","import_react","import_api_client_react","import_popup_centered","import_react","import_api_client_react","useOAuth","opts","oauthPopupError","setOauthPopupError","currentAppKey","setCurrentAppKey","client","handleNewOauthCredentialMessage","e","_a","evData","openOAuthPopup","popupOpts","url","popup","useCredentialHandler","opts","appKey","setCredentialId","openOAuthPopup","useOAuth","newCredentialId","credentialsQuery","authInfo","credentials","hasCredentials","assert","import_ui","import_react","import_react","import_ui","AppIcon","props","apiBaseUrl","useRolloutApiBaseUrlContext","appKey","css","src","React","import_react","import_api_client_react","import_ui","_RolloutAppKeyProvider","useRolloutAppKeyContext","RolloutAppKeyProvider","props","_a","appKey","React","RolloutAppKeyProviderInner","context","_RolloutAppKeyProvider","import_ts_object_path","findIssue","validation","pathGetter","proxy","path","err","import_ui","import_ui","AutomationFormContextProvider","useAutomationFormContext","ActionAppKeyInput","props","_a","_b","appKey","useRolloutAppKeyContext","apps","data","setData","validation","useAutomationFormContext","action","error","findIssue","b","options","a","selectedApp","shouldShowErrors","useFormContext","React","app","AppIcon","newSelectedApp","currentData","isNewActionAppCustomers","isTriggerAppCustomers","shouldUnsetTrigger","ActionAppKeyField","import_react","import_api_client_react","import_assert","import_react","import_api_client_react","import_react","import_api_client_react","import_ui","import_react","import_ui","TokenInput","props","ref","isTestingConnection","value","onChange","infoHTML","label","placeholder","React","CredentialDetails","props","appKey","saveApiToken","authType","firstApiTokenInput","openOAuthPopup","closeModal","savingApiToken","inputValues","setInputValues","apiTokenConnectionTested","setApiTokenConnectionTested","apiTokenConnectionValid","setApiTokenConnectionValid","testingConnection","setTestingConnection","apiTokenConnectionQuery","apiTokenFormIsValid","validateApiTokenForm","i","testApiTokenConnection","valid","renderInputs","_a","input","inputIdx","React","TokenInput","newValue","openOAuth","testOrSaveToken","import_ui","ADD_NEW_CREDENTIAL_OPTION","React","CredentialInput","props","isDisabled","appKey","setCredentialId","credentialId","authInfoQuery","error","shouldShowErrors","useFormContext","oauthError","setOauthError","savingApiToken","setSavingApiToken","apiTokenQuery","credentials","firstApiTokenInput","credentialInputRef","displayCredentialDetails","setDisplayCredentialDetails","openOAuthPopup","oauthPopupError","useOAuth","newCredentialId","credentialsList","selectedCredential","cred","icon","saveApiToken","apiToken","t","_a","options","selectedOption","opt","newCred","appAuthInfo","addNewAccount","assert","item","CredentialDetails","AnyAuthCredentialInput","authInfo","ActionCredentialIdInput","props","appKey","credentialId","setCredentialId","error","isDisabled","authInfoQuery","React","AnyAuthCredentialInput","ActionCredentialIdField","data","setData","validation","useAutomationFormContext","action","newCredentialId","currentData","issue","import_react","import_ui","ActionKeySelectInput","props","_a","data","setData","actions","validation","useAutomationFormContext","shouldShowErrors","setShouldShowErrors","useFormContext","error","issue","icon","React","AppIcon","options","selectedAction","a","newSelectedAction","currentData","item","ActionKeyField","import_assert","import_react","import_assert","import_react","import_api_client_react","import_react","import_ts_object_path","import_api_client_react","import_react","import_ts_assert_unreachable","import_react","import_ui","PlainTextInputDefRenderer","props","React","import_react","import_common","import_ui","RichTextInputDefRenderer","props","resolvedValue","React","newValue","import_ui","import_react","import_ui","DropdownInputDefRenderer","props","def","value","setValue","getDynamicOptions","dropdownOptions","_a","opt","selectedOption","e","React","newSelectedOption","item","InputDefRendererContextProvider","useInputDefRendererContext","InputDefRenderer","props","renderParams","useAppComponentRendererContext","field","renderField","InputDefRendererField","React","ctx","def","value","setValue","variables","getDynamicOptions","renderInput","PlainTextInputDefRenderer","DropdownInputDefRenderer","RichTextInputDefRenderer","StyledInputFormControl","b","AppComponentRenderer","props","api","credentialId","inputParams","setInputParams","importedData","variables","getDynamicOptions","React","AppComponentRendererContextProvider","action_inputs_exports","def","InputDefRenderer","newValue","import_react","import_common","useSafeLayoutEffect","useActionRendererData","opts","actionRef","apiBaseUrl","useRolloutApiBaseUrlContext","actionRendererData","setActionRendererData","React","action_inputs_exports","appKey","actionKey","importPath","data","AutomationFormActionInputs","React","ActionInputFields","_a","client","data","setData","variables","renderFields","useAutomationFormContext","action","actionRendererData","useActionRendererData","setInputParams","newParams","currentData","assert","AppComponentRenderer","AutomationFormAction","_a","_b","_c","data","renderFields","useAutomationFormContext","action","assert","actionAppKeyField","renderField","ActionAppKeyField","actionKeyField","ActionKeyField","credentialIdField","ActionCredentialIdField","React","AutomationFormActionInputs","import_assert","import_react","import_api_client_react","import_react","import_api_client_react","import_ui","TriggerAppKeyInput","props","appKey","useRolloutAppKeyContext","data","setData","validation","useAutomationFormContext","trigger","triggerApps","shouldShowErrors","useFormContext","error","findIssue","b","options","selectedApp","opt","React","AppIcon","newSelectedTriggerApp","currentData","_a","isNewTriggerAppCustomers","isActionAppCustomers","shouldUnsetAction","option","TriggerAppKeyField","import_react","import_api_client_react","import_ui","TriggerKeyInput","props","isDisabled","shouldShowErrors","useFormContext","validation","data","setData","useAutomationFormContext","trigger","triggers","error","findIssue","b","options","selectedOption","opt","React","AppIcon","newTrigger","currentData","item","TriggerKeyField","import_react","import_api_client_react","TriggerCredentialIdInput","props","appKey","credentialId","setCredentialId","error","isDisabled","authInfoQuery","React","AnyAuthCredentialInput","AutomationFormTrigger","_a","_b","_c","client","data","setData","renderFields","validation","useAutomationFormContext","trigger","triggerRendererData","useTriggerRendererData","setInputParams","newParams","currentData","setCredentialId","newCredentialId","variables","assert","triggerAppKeyField","renderField","TriggerAppKeyField","triggerKeyField","TriggerKeyField","hasInputParams","React","TriggerCredentialIdInput","issue","AppComponentRenderer","inputKey","import_react","import_ui","NameInput","props","disabled","data","setData","validation","useAutomationFormContext","shouldShowErrors","useFormContext","hasError","findIssue","b","React","newName","currentData","NameField","import_react","import_zod","zAutomationFormSchema","useValidateAutomationFormData","opts","data","actionInputParamsSchema","triggerInputParamsSchema","schema","AutomationForm","props","_a","_b","_c","_d","_e","data","isSaving","onSave","onCancel","onUpdate","onDelete","mode","renderFields","shouldShowErrors","setShouldShowErrors","isOpen","toggleDeleteMenu","client","selectedTrigger","t","triggerPayloadSchemaAsync","triggerPayloadVariables","prop","allowedApps","useRolloutAllowedAppsContext","apps","useAppsQuery","actions","useActionsQuery","actionRendererData","useActionRendererData","triggerRendererData","useTriggerRendererData","triggerInputParamsSchema","zAutomationFormSchema","actionInputParamsSchema","validation","useValidateAutomationFormData","setData","updater","currentData","newData","didChangeTrigger","newAction","context","formContext","setTriggerCredentialId","newCredentialId","setActionCredentialId","useCredentialHandler","hasNullData","showSpinner","React","nameField","renderField","NameField","triggerField","AutomationFormTrigger","TriggerAppKeyField","TriggerKeyField","actionField","AutomationFormAction","ActionAppKeyField","ActionKeyField","ActionCredentialIdField","ActionInputFields","FormContextProvider","AutomationFormContextProvider","AutomationCreator","props","onAutomationCreated","onBeforeAutomationCreate","onCancel","prefilled","renderFields","createAutomationMutation","automationFormData","setAutomationFormData","_a","_b","defaultData","createAutomation","data","onBeforeAutomationCreateReturn","automationData","automation","React","AutomationForm","import_react","import_api_client_react","AutomationEditor","props","automationId","onAutomationDeleted","onAutomationUpdated","onCancel","renderFields","invalidateQueries","deleteAutomation","automationFormData","setAutomationFormData","automation","aut","updateAutomationMutation","React","editAutomation","data","updatedAutomation","onDelete","AutomationForm","import_react","import_react","import_api_client_react","import_match_sorter","import_react","import_ui","AutomationsList","props","automations","isLoading","isDeleting","onEditAutomation","onDeleteAutomation","query","setQuery","automationFiltered","isEmptyAutomations","React","automation","AutomationsListItem","onEdit","onDelete","isOpen","toggleDeleteMenu","itemDeleting","setItemDeleting","optionsList","e","AppIcon","import_ui","MyAutomations","props","onEditAutomation","onCreateAutomation","filter","invalidateQueries","automationData","setAutomationData","automations","a","filterError","deleteAutomation","React","AutomationsList","at","import_ui","AutomationsManager","props","onAutomationCreated","onBeforeAutomationCreate","prefilled","filter","renderFields","currentView","setCurrentView","React","MyAutomations","aut","AutomationCreator","createdData","AutomationEditor","import_react","import_spin_delay","import_api_client_react","import_common","import_ui","import_react","import_zod","zBlueprintActivatorFormSchema","useValidateBlueprintActivatorFormData","opts","data","actionInputParamsSchema","triggerInputParamsSchema","schema","BlueprintActivator","props","_a","_b","_c","_d","_e","_f","_g","_h","blueprintId","client","invalidateQueries","data","setData","triggerPayloadSchema","triggerAuthType","triggersForApp","triggerRendererData","useTriggerRendererData","trigger","authType","blueprint","bp","createAutomation","deactivateAutomation","triggerInputParamsSchema","zBlueprintActivatorFormSchema","actionRendererData","useActionRendererData","actionInputParamsSchema","validation","useValidateBlueprintActivatorFormData","setTriggerCredentialId","newCredentialId","currentData","setActionCredentialId","useCredentialHandler","setTriggerInputParams","newParams","selectedTrigger","t","triggerPayloadSchemaAsync","triggerPayloadVariables","prop","maybeRenderActionRender","React","AnyAuthCredentialInput","issue","newAction","AppComponentRenderer","isActivated","shouldShowErrors","setShouldShowErrors","formContext","triggerInputVariables","activate","d","deactivate","showSpinner","hasInputParams","triggerInputs","inputKey","FormContextProvider","AppIcon","import_match_sorter","import_react","import_api_client_react","import_ui","BlueprintsList","props","blueprints","isLoading","onOpenActivationForm","query","setQuery","blueprintsFiltered","isFilteredListEmpty","React","blueprint","BlueprintsListItem","_a","invalidateQueries","deactivateAutomation","active","e","AppIcon","blueprintId","import_react","import_react","import_api_client_react","MyBlueprints","props","onOpenActivationForm","blueprints","React","BlueprintsList","import_ui","BlueprintsManager","currentView","setCurrentView","React","MyBlueprints","bp","BlueprintActivator","import_react","import_ui","PoweredByRollout","React","$9d939cbc98267846$var$defaultContext","$9d939cbc98267846$var$SSRContext","$cgWTI$react","$9d939cbc98267846$export$9f8ac96af4b1b2ae","props","cur","$cgWTI$useContext","value","$cgWTI$useMemo","$9d939cbc98267846$var$canUseDOM","$9d939cbc98267846$export$619500959fc48b26","defaultId","ctx","$9d939cbc98267846$export$535bd6ca7f90a273","isInSSRContext","isSSR","setIsSSR","$cgWTI$useState","$cgWTI$useLayoutEffect","import_browser","import_react","import_react_error_boundary","import_api_client_react","import_react","import_ui","ErrorFallback","React","ROLLOUT_API_BASE_URL","SENTRY_DSN","RolloutConnectProvider","props","token","allowedApps","apiBaseUrl","children","env","onErrorProp","sentry","onError","error","info","React","ErrorFallback","RolloutApiBaseUrlContextProvider","RolloutAllowedAppsContextProvider","RolloutAppKeyProvider","$9d939cbc98267846$export$9f8ac96af4b1b2ae","import_common","import_ui","card","defaultTheme"]}